(function(e){function t(t){for(var r,o,i=t[0],c=t[1],l=t[2],d=0,p=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(u,o)&&u[o]&&p.push(u[o][0]),u[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);s&&s(t);while(p.length)p.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,i=1;i<n.length;i++){var c=n[i];0!==u[c]&&(r=!1)}r&&(a.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},u={app:0},a=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/loopbar/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var s=c;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"25c7":function(e,t,n){"use strict";n("a995")},4758:function(e,t,n){"use strict";n("acb8")},5653:function(e,t,n){"use strict";n("9eaf")},"5f58":function(e,t,n){},"7dec":function(e,t,n){},"9cdc":function(e,t,n){"use strict";n("d673")},"9eaf":function(e,t,n){},a995:function(e,t,n){},acb8:function(e,t,n){},b6e6:function(e,t,n){"use strict";n("7dec")},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23");function u(e,t,n,u,a,o){var i=Object(r["v"])("router-view");return Object(r["o"])(),Object(r["c"])(i)}n("9cdc");const a={};a.render=u;var o=a,i=n("9483");Object(i["a"])("".concat("/loopbar/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var c=n("6c02"),l=Object(r["E"])("data-v-4aae0695");Object(r["r"])("data-v-4aae0695");var s={class:"container"},d={class:"video-area"},p=Object(r["d"])(" Choose a video file "),f={class:"currentTime"},b={class:"loop-area"},m={class:"loop-settings"},v={class:"input-with-button"},O=Object(r["d"])("from"),j=Object(r["d"])("for duration"),h={class:"input-with-button"},y=Object(r["d"])("to");Object(r["p"])();var g=l((function(e,t,n,u,a,o){var i=Object(r["v"])("VideoPlayer"),c=Object(r["v"])("NumberInput"),g=Object(r["v"])("BeatSettings");return Object(r["o"])(),Object(r["c"])("div",s,[Object(r["e"])("div",d,[Object(r["e"])("label",null,[p,Object(r["e"])("input",{ref:"videoFileInput",type:"file",accept:"video/*",onChange:t[1]||(t[1]=function(){return e.videoFileSelected.apply(e,arguments)})},null,544)]),Object(r["e"])(i,{ref:"player",file:e.videoFile,onUpdatedTimeDisplay:t[2]||(t[2]=function(t){return e.currentTimeDisplay=t}),onPaused:e.videoPaused},null,8,["file","onPaused"]),Object(r["e"])("span",f," Beat #"+Object(r["x"])(e.bar)+" ("+Object(r["x"])(e.currentTimeIndicator)+") ",1)]),Object(r["e"])("div",b,[Object(r["e"])("button",{onClick:t[3]||(t[3]=function(t){return e.toggleLoop()})},Object(r["x"])(e.loopButtonText),1),Object(r["e"])("div",m,[Object(r["e"])("div",v,[Object(r["e"])(c,{modelValue:e.range.start,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.range.start=t})},{default:l((function(){return[O]})),_:1},8,["modelValue"]),Object(r["e"])("button",{onClick:t[5]||(t[5]=function(t){return e.loopStartToNowClicked()})},"set to now")]),Object(r["e"])(c,{modelValue:e.range.duration,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.range.duration=t})},{default:l((function(){return[j]})),_:1},8,["modelValue"]),Object(r["e"])("div",h,[Object(r["e"])(c,{modelValue:e.range.end,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.range.end=t})},{default:l((function(){return[y]})),_:1},8,["modelValue"]),Object(r["e"])("button",{onClick:t[8]||(t[8]=function(t){return e.loopEndToNowClicked()})},"set to now")])])]),Object(r["e"])(g,{currentTimeDisplay:e.currentTimeDisplay,getCurrentTime:e.getCurrentTime,bpm:e.bpm,"onUpdate:bpm":t[9]||(t[9]=function(t){return e.bpm=t}),offset:e.offset,"onUpdate:offset":t[10]||(t[10]=function(t){return e.offset=t}),onStartPlay:t[11]||(t[11]=function(t){return e.player.play()})},null,8,["currentTimeDisplay","getCurrentTime","bpm","offset"])])})),x=(n("b0c0"),n("3835")),T=Object(r["E"])("data-v-13dc78a5"),V=T((function(e,t,n,u,a,o){return Object(r["o"])(),Object(r["c"])("video",{ref:"player",id:"player",src:e.source,controls:"",onPlaying:t[1]||(t[1]=function(t){return e.$emit("started-playing")}),onPause:t[2]||(t[2]=function(t){return e.$emit("paused")})},null,40,["src"])})),w=(n("d3b7"),n("3ca3"),n("ddb0"),n("2b3d"),Object(r["f"])({props:{file:{type:File}},emits:["updated-time-display","started-playing","paused"],setup:function(e,t){var n=Object(r["t"])(null),u=Object(r["a"])((function(){if(null!=e.file){var t=URL.createObjectURL(e.file);return t}return null})),a=null,o=function e(){var r=n.value.currentTime;a!==r&&(a=r,t.emit("updated-time-display",r)),requestAnimationFrame(e)};return Object(r["m"])(o),{player:n,source:u}},methods:{getCurrentTime:function(){return this.player.currentTime},seekToSecond:function(e){this.player.currentTime=e},play:function(){this.player.play()},pause:function(){this.player.pause()}}}));n("5653");w.render=V,w.__scopeId="data-v-13dc78a5";var I=w,k=Object(r["E"])("data-v-e8fde0a6");Object(r["r"])("data-v-e8fde0a6");var _={class:"beat-settings"},C={class:"visualization"},S={class:"beat-indicator"},N={class:"settings-area"},M={class:"meter setting"},F={class:"header"},B=Object(r["d"])(" Use tap settings "),P={class:"inputs"},D={class:"bpm-display"},L={key:0,class:"missing-beats"},U={key:1,class:"bpm"},$={class:"custom setting"},E={class:"header"},q=Object(r["d"])(" Use custom settings "),A={class:"inputs"},z=Object(r["d"])("Beats per minute (bpm)"),J=Object(r["d"])("Offset (in % of bpm)");Object(r["p"])();var R=k((function(e,t,n,u,a,o){var i=Object(r["v"])("NumberInput"),c=Object(r["v"])("SliderInput");return Object(r["o"])(),Object(r["c"])("div",_,[Object(r["e"])("div",C,[Object(r["e"])("span",S,Object(r["x"])(e.beatIndicator),1),Object(r["d"])(" "+Object(r["x"])(e.bpmDisplay)+" bpm ",1)]),Object(r["e"])("div",N,[Object(r["e"])("div",M,[Object(r["e"])("div",F,[Object(r["e"])("label",null,[Object(r["D"])(Object(r["e"])("input",{type:"radio",name:"beatInput",value:"meter","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.beatInput=t}),disabled:e.beatMeter.needsMoreBeats},null,8,["disabled"]),[[r["A"],e.beatInput]]),B])]),Object(r["e"])("div",P,[Object(r["e"])("button",{onMousedown:t[2]||(t[2]=function(){return e.tappedBeat.apply(e,arguments)})},"Tap me to the beat",32),Object(r["e"])("div",D,[e.beatMeter.needsMoreBeats?(Object(r["o"])(),Object(r["c"])("span",L," Set the beats per minute (bpm) by tapping the button. ")):(Object(r["o"])(),Object(r["c"])("span",U,Object(r["x"])(e.meterBpmDisplay)+" bpm (offset "+Object(r["x"])(e.meterOffsetDisplay)+") ",1))]),Object(r["e"])("button",{onClick:t[3]||(t[3]=function(){return e.resetClicked.apply(e,arguments)})},"Reset bpm")])]),Object(r["e"])("div",$,[Object(r["e"])("div",E,[Object(r["e"])("label",null,[Object(r["D"])(Object(r["e"])("input",{type:"radio",name:"beatInput",value:"custom","onUpdate:modelValue":t[4]||(t[4]=function(t){return e.beatInput=t})},null,512),[[r["A"],e.beatInput]]),q])]),Object(r["e"])("div",A,[Object(r["e"])(i,{modelValue:e.customBpm,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.customBpm=t})},{default:k((function(){return[z]})),_:1},8,["modelValue"]),Object(r["e"])(c,{modelValue:e.customOffsetPercent,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.customOffsetPercent=t}),min:-50,max:50},{default:k((function(){return[J]})),_:1},8,["modelValue"])])])])])})),G=(n("a9e3"),n("b680"),Object(r["E"])("data-v-761cce27"));Object(r["r"])("data-v-761cce27");var H={class:"number-input"},K={class:"label"};Object(r["p"])();var Q=G((function(e,t,n,u,a,o){return Object(r["o"])(),Object(r["c"])("div",H,[Object(r["e"])("button",{class:"first-button",onClick:t[1]||(t[1]=function(){return e.decrement.apply(e,arguments)})},"⬅️"),Object(r["e"])("label",null,[Object(r["e"])("div",K,[Object(r["u"])(e.$slots,"default")]),Object(r["e"])("input",{class:"input",type:"text",inputmode:"decimal",value:e.inputText,onChange:t[2]||(t[2]=function(t){return e.newInput(t.target.value)})},null,40,["value"])]),Object(r["e"])("button",{class:"second-button",onClick:t[3]||(t[3]=function(){return e.increment.apply(e,arguments)})},"➡️")])})),W=(n("c35a"),n("25f0"),Object(r["f"])({props:{modelValue:{type:Number,required:!0}},emits:["update:modelValue"],setup:function(e){var t=Object(r["y"])(e),n=t.modelValue,u=Object(r["t"])(Y(n.value));return Object(r["C"])(n,(function(e){var t=X(u.value);null!=t&&t!==e&&(u.value=Y(e))})),{inputText:u}},methods:{newInput:function(e){this.inputText=e;var t=X(e);null!=t&&this.$emit("update:modelValue",t)},increment:function(){this.$emit("update:modelValue",this.modelValue+1)},decrement:function(){this.$emit("update:modelValue",this.modelValue-1)}}}));function X(e){var t=Number.parseFloat(e);return isNaN(t)?null:t}function Y(e){return e%1===0?e.toString():e.toFixed(2)}n("e0fe");W.render=Q,W.__scopeId="data-v-761cce27";var Z=W,ee=Object(r["E"])("data-v-cc3e4eb8");Object(r["r"])("data-v-cc3e4eb8");var te={class:"inputs"};Object(r["p"])();var ne=ee((function(e,t,n,u,a,o){return Object(r["o"])(),Object(r["c"])("div",null,[Object(r["e"])("label",null,[Object(r["u"])(e.$slots,"default"),Object(r["e"])("div",te,[Object(r["e"])("input",{type:"text",inputmode:"decimal",value:e.inputText,onChange:t[1]||(t[1]=function(t){return e.newTextInput(t.target.value)})},null,40,["value"]),Object(r["e"])("input",{type:"range",value:e.modelValue,onInput:t[2]||(t[2]=function(t){return e.newSliderInput(t.target.value)}),min:e.min,max:e.max},null,40,["value","min","max"])])])])})),re=Object(r["f"])({props:{modelValue:{type:Number,required:!0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1}},emits:["update:modelValue"],setup:function(e,t){var n=Object(r["y"])(e),u=n.modelValue,a=Object(r["t"])(ae(u.value,e.step)),o=Object(r["a"])((function(){return u.value.toFixed(0)}));return Object(r["C"])(u,(function(t){var n=ue(a.value);null!=n&&n!==t&&(a.value=ae(t,e.step))})),{inputText:a,modelValueDisplay:o}},methods:{newTextInput:function(e){this.inputText=e;var t=ue(e);null!=t&&this.$emit("update:modelValue",t)},newSliderInput:function(e){var t=ue(e);null!=t&&this.$emit("update:modelValue",t)},increment:function(){var e=this.modelValue+1;this.$_updateModelValue(e)},decrement:function(){var e=this.modelValue-1;this.$_updateModelValue(e)},$_updateModelValue:function(e){Math.max(this.min,Math.min(this.max,e));e!==this.modelValue&&this.$emit("update:modelValue",e)}}});function ue(e){var t=Number.parseFloat(e);return isNaN(t)?null:t}function ae(e,t){var n=t%1;return 0===n?e.toFixed(0):e.toFixed(2)}n("4758");re.render=ne,re.__scopeId="data-v-cc3e4eb8";var oe=re,ie=(n("d81d"),n("13d5"),n("fb6a"),n("d4ec")),ce=n("bee2"),le=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Object(ie["a"])(this,e),this.beats=t,this.period_=0,this.offset_=0,this.calculate(t)}return Object(ce["a"])(e,[{key:"addBeats",value:function(){var e;(e=this.beats).push.apply(e,arguments),ve(this.beats),this.calculate(this.beats)}},{key:"reset",value:function(){this.beats=[],this.calculate(this.beats)}},{key:"calculate",value:function(e){this.period_=pe(e),this.offset_=be(e,this.period)}},{key:"period",get:function(){return this.period_}},{key:"bpm",get:function(){return 0===this.period?0:se(this.period)}},{key:"offset",get:function(){return this.offset_}},{key:"needsMoreBeats",get:function(){return this.beats.length<2}}]),e}();function se(e){return 60/e}function de(e){return 60/e}function pe(e){if(e.length<=1)return 0;var t=ve(fe(e)),n=me(t),r=n.reduce((function(e,t){return e+t}),0)/n.length;return r}function fe(e){for(var t=new Array(e.length-1),n=0;n<e.length-1;n++){var r=e[n],u=e[n+1],a=u-r;t[n]=a}return t}function be(e,t){if(0===t)return 0;var n=ve(e.map((function(e){return e%t}))),r=me(n),u=r.reduce((function(e,t){return e+t}),0)/r.length;return u/t}function me(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=e.length,u=Math.floor(r/t*n),a=Math.ceil(r/t*(t-n));return e.slice(u,a)}function ve(e){return e.sort((function(e,t){return e-t}))}var Oe=Object(r["f"])({components:{NumberInput:Z,SliderInput:oe},props:{bpm:{type:Number,required:!0},offset:{type:Number,required:!0},currentTimeDisplay:{type:Number,required:!0},getCurrentTime:{type:Function,required:!0}},emits:["update:bpm","update:offset","start-play"],setup:function(e,t){var n=Object(r["t"])("custom"),u=Object(r["a"])({get:function(){return e.bpm},set:function(e){return t.emit("update:bpm",e)}}),a=Object(r["a"])({get:function(){return e.offset},set:function(e){return t.emit("update:offset",e)}}),o=Object(r["a"])({get:function(){return 100*a.value},set:function(e){a.value=e/100}}),i=Object(r["s"])(new le),c=Object(r["a"])((function(){return"meter"===n.value?i.period:de(u.value)})),l=Object(r["a"])((function(){return"meter"===n.value?i.bpm:u.value})),s=Object(r["a"])((function(){return"meter"===n.value?i.offset:a.value}));Object(r["C"])(l,(function(e){return t.emit("update:bpm",e)})),Object(r["C"])(s,(function(e){return t.emit("update:offset",e)}));var d=Object(r["a"])((function(){var t=s.value*c.value,n=(e.currentTimeDisplay-t)%c.value;return n/c.value<.25})),p=Object(r["a"])((function(){return d.value?"👏":"👐"})),f=Object(r["a"])((function(){return i.bpm.toFixed(1)})),b=Object(r["a"])((function(){return"".concat(i.offset.toFixed(1)," %")})),m=Object(r["a"])((function(){return l.value.toFixed(1)})),v=Object(r["a"])((function(){var e=100*s.value;return"".concat(e.toFixed(0)," %")}));return{customBpm:u,customOffsetPercent:o,meterBpmDisplay:f,meterOffsetDisplay:b,bpmDisplay:m,offsetDisplay:v,beatMeter:i,beatIndicator:p,beatInput:n}},methods:{tappedBeat:function(){this.$emit("start-play"),this.beatMeter.addBeats(this.getCurrentTime())},resetClicked:function(){this.beatMeter.reset()}}});n("b6e6");Oe.render=R,Oe.__scopeId="data-v-e8fde0a6";var je=Oe,he=function(){function e(t,n){Object(ie["a"])(this,e),this.start_=Math.max(0,t),this.duration_=Math.max(0,n)}return Object(ce["a"])(e,[{key:"sanitizeInput",value:function(e,t){return isNaN(e)?t:Math.max(0,e)}},{key:"start",get:function(){return this.start_},set:function(e){this.start_=this.sanitizeInput(e,this.start)}},{key:"duration",get:function(){return this.duration_},set:function(e){this.duration_=this.sanitizeInput(e,this.duration)}},{key:"end",get:function(){return this.start+this.duration},set:function(e){var t=e-this.start;t>=0?this.duration=t:(this.start=this.start+t,this.duration=0)}}],[{key:"fromStartAndEnd",value:function(t,n){if(t<n){var r=n-t;return new e(t,r)}return null}}]),e}();n("99af"),n("4d90");function ye(e){var t=e/60,n=t/60,r=Math.floor(n).toFixed(0).padStart(2,"0"),u=Math.floor(t%60).toFixed(0).padStart(2,"0"),a=Math.floor(e%60).toFixed(0).padStart(2,"0"),o=Math.floor(100*e%100).toFixed(0).padStart(2,"0"),i="".concat(r,":").concat(u,":").concat(a,".").concat(o);return i}var ge=Object(r["f"])({components:{VideoPlayer:I,NumberInput:Z,BeatSettings:je},setup:function(){var e=Object(r["t"])(null),t=Object(r["t"])(null),n=Object(r["t"])(null),u=Object(r["t"])(0),a=Object(r["a"])((function(){return ye(u.value)})),o=Object(r["t"])(120),i=Object(r["a"])((function(){return de(o.value)})),c=Object(r["t"])(0),l=Object(r["a"])((function(){if(i.value>0){var e=c.value*i.value;return Math.floor((u.value-e)/i.value)}return 0})),s=function(e,t){localStorage.setItem(e.name,JSON.stringify(t))},d=function(e){var t=localStorage.getItem(e.name);return null!==t?JSON.parse(t):null};Object(r["C"])([o,c],(function(e){var n=Object(x["a"])(e,2),r=n[0],u=n[1];null!==t.value&&s(t.value,{bpm:r,offset:u})})),Object(r["C"])(t,(function(e){if(null!==e){var t=d(e);null!==t&&(o.value=t.bpm,c.value=t.offset)}}));var p=Object(r["s"])(new he(0,1)),f=Object(r["t"])(!1),b=Object(r["a"])((function(){return f.value?"Stop loop":"Start loop"})),m=function(){var e=xe(p.start,i.value,c.value);n.value.seekToSecond(e),n.value.play()};return Object(r["C"])([f,u,p],(function(e){var t=Object(x["a"])(e,3),n=t[0],r=t[1],u=t[2],a=.1,o=xe(u.start,i.value,c.value)-a,l=xe(u.end,i.value,c.value),s=o<r&&r<l;n&&!s&&m()})),{videoFileInput:e,videoFile:t,player:n,currentTimeDisplay:u,currentTimeIndicator:a,bpm:o,period:i,offset:c,bar:l,isLooping:f,range:p,loopButtonText:b}},methods:{videoFileSelected:function(){var e=this.videoFileInput.files;if(null!==e&&0!==e.length){var t=e[0];null!=t&&(this.videoFile=t)}},getCurrentTime:function(){return null!==this.player?this.player.getCurrentTime():0},toggleLoop:function(){this.isLooping?this.stopLoop():this.startLoop()},startLoop:function(){this.isLooping=!0},stopLoop:function(){this.isLooping=!1},videoPaused:function(){this.stopLoop()},loopStartToNowClicked:function(){this.range.start=this.bar},loopEndToNowClicked:function(){this.range.end=this.bar}}});function xe(e,t,n){var r=n*t;return e*t+r}n("25c7");ge.render=g,ge.__scopeId="data-v-4aae0695";var Te=ge,Ve=[{path:"/",name:"Loopbar",component:Te}],we=Object(c["a"])({history:Object(c["b"])(),routes:Ve}),Ie=we,ke=n("5502"),_e=Object(ke["a"])({state:{},mutations:{},actions:{},modules:{}});Object(r["b"])(o).use(_e).use(Ie).mount("#app")},d673:function(e,t,n){},e0fe:function(e,t,n){"use strict";n("5f58")}});
//# sourceMappingURL=app.28fc0f45.js.map