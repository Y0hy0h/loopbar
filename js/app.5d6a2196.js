(function(t){function e(e){for(var r,i,c=e[0],u=e[1],s=e[2],d=0,p=[];d<c.length;d++)i=c[d],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&p.push(o[i][0]),o[i]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(t[r]=u[r]);l&&l(e);while(p.length)p.shift()();return a.push.apply(a,s||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],r=!0,c=1;c<n.length;c++){var u=n[c];0!==o[u]&&(r=!1)}r&&(a.splice(e--,1),t=i(i.s=n[0]))}return t}var r={},o={app:0},a=[];function i(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=r,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/loopbar/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=e,c=c.slice();for(var s=0;s<c.length;s++)e(c[s]);var l=u;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("cd49")},3171:function(t,e,n){"use strict";n("cbf8")},"65f7":function(t,e,n){},"717d":function(t,e,n){},"7d35":function(t,e,n){"use strict";n("717d")},8423:function(t,e,n){"use strict";n("c2f8")},"9cdc":function(t,e,n){"use strict";n("d673")},b7e9:function(t,e,n){"use strict";n("65f7")},c2f8:function(t,e,n){},cbf8:function(t,e,n){},cd49:function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23");function o(t,e,n,o,a,i){var c=Object(r["v"])("router-view");return Object(r["o"])(),Object(r["c"])(c)}n("9cdc");const a={};a.render=o;var i=a,c=n("9483");Object(c["a"])("".concat("/loopbar/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}});var u=n("6c02"),s=Object(r["C"])("data-v-c6afb2ca");Object(r["r"])("data-v-c6afb2ca");var l={class:"container"},d={class:"video-area"},p={class:"currentTime"},b={key:0},f={key:1,class:"missing-beats"},v={class:"loop-area"},h={class:"loop-settings"},O={class:"input-with-button"},j=Object(r["d"])("from"),m=Object(r["d"])("for duration"),y={class:"input-with-button"},g=Object(r["d"])("to");Object(r["p"])();var M=s((function(t,e,n,o,a,i){var c=Object(r["v"])("VideoPlayer"),u=Object(r["v"])("NumberInput"),M=Object(r["v"])("BeatSettings");return Object(r["o"])(),Object(r["c"])("div",l,[Object(r["e"])("div",d,[Object(r["e"])(c,{ref:"player",onUpdatedTime:e[1]||(e[1]=function(e){return t.currentTime=e}),onPaused:t.videoPaused},null,8,["onPaused"]),Object(r["e"])("span",p,[t.beatMeter.needsMoreBeats?(Object(r["o"])(),Object(r["c"])("span",f," Set bpm below. ")):(Object(r["o"])(),Object(r["c"])("span",b," Beat #"+Object(r["x"])(t.bar),1)),Object(r["d"])(" ("+Object(r["x"])(t.currentTimeIndicator)+") ",1)])]),Object(r["e"])("div",v,[Object(r["e"])("button",{onClick:e[2]||(e[2]=function(e){return t.toggleLoop()})},Object(r["x"])(t.loopButtonText),1),Object(r["e"])("div",h,[Object(r["e"])("div",O,[Object(r["e"])(u,{modelValue:t.range.start,"onUpdate:modelValue":e[3]||(e[3]=function(e){return t.range.start=e})},{default:s((function(){return[j]})),_:1},8,["modelValue"]),Object(r["e"])("button",{onClick:e[4]||(e[4]=function(e){return t.loopStartToNowClicked()})},"set to now")]),Object(r["e"])(u,{modelValue:t.range.duration,"onUpdate:modelValue":e[5]||(e[5]=function(e){return t.range.duration=e})},{default:s((function(){return[m]})),_:1},8,["modelValue"]),Object(r["e"])("div",y,[Object(r["e"])(u,{modelValue:t.range.end,"onUpdate:modelValue":e[6]||(e[6]=function(e){return t.range.end=e})},{default:s((function(){return[g]})),_:1},8,["modelValue"]),Object(r["e"])("button",{onClick:e[7]||(e[7]=function(e){return t.loopEndToNowClicked()})},"set to now")])])]),Object(r["e"])(M,{ref:"beatSettings",currentTime:t.currentTime,beatMeter:t.beatMeter,"onUpdate:beatMeter":e[8]||(e[8]=function(e){return t.beatMeter=e}),onStartPlay:e[9]||(e[9]=function(e){return t.player.play()})},null,8,["currentTime","beatMeter"])])})),k=Object(r["C"])("data-v-35765380");Object(r["r"])("data-v-35765380");var _={class:"video-container"},w=Object(r["d"])(" Choose a video file ");Object(r["p"])();var S=k((function(t,e,n,o,a,i){return Object(r["o"])(),Object(r["c"])("div",_,[Object(r["e"])("label",null,[w,Object(r["e"])("input",{ref:"videoFileInput",type:"file",accept:"video/*",onChange:e[1]||(e[1]=function(){return t.videoFileSelected.apply(t,arguments)})},null,544)]),Object(r["e"])("video",{ref:"player",id:"player",controls:"",onPlaying:e[2]||(e[2]=function(e){return t.$emit("started-playing")}),onPause:e[3]||(e[3]=function(e){return t.$emit("paused")})},null,544)])})),T=(n("d3b7"),n("3ca3"),n("ddb0"),n("2b3d"),Object(r["f"])({emits:["updated-time","started-playing","paused"],setup:function(t,e){var n=Object(r["t"])(null),o=Object(r["t"])(null),a=Object(r["t"])(0),i=function t(){a.value=o.value.currentTime,e.emit("updated-time",a.value),requestAnimationFrame(t)};return Object(r["m"])(i),{videoFileInput:n,player:o,currentTime:a}},methods:{seekToSecond:function(t){this.player.currentTime=t},play:function(){this.player.play()},pause:function(){this.player.pause()},videoFileSelected:function(){var t,e=null===(t=this.videoFileInput.files)||void 0===t?void 0:t[0],n=URL.createObjectURL(e);this.player.src=n}}}));n("8423");T.render=S,T.__scopeId="data-v-35765380";var x=T,I=Object(r["C"])("data-v-9bd0fa4a");Object(r["r"])("data-v-9bd0fa4a");var C={class:"beat-settings"},V={class:"bpm-display"},F={key:0,class:"bpm"},B={class:"beat-indicator"},N={key:1,class:"missing-beats"};Object(r["p"])();var P=I((function(t,e,n,o,a,i){return Object(r["o"])(),Object(r["c"])("div",C,[Object(r["e"])("button",{onMousedown:e[1]||(e[1]=function(){return t.tappedBeat.apply(t,arguments)})},"Tap me to the beat",32),Object(r["e"])("div",V,[t.beatMeter.needsMoreBeats?(Object(r["o"])(),Object(r["c"])("span",N,"Set the beats per minute (bpm) by tapping the button.")):(Object(r["o"])(),Object(r["c"])("span",F,[Object(r["e"])("span",B,Object(r["x"])(t.beatIndicator),1),Object(r["d"])(" "+Object(r["x"])(t.bpmDisplay)+" bpm ",1)]))]),Object(r["e"])("button",{onClick:e[2]||(e[2]=function(){return t.resetClicked.apply(t,arguments)})},"Reset bpm")])})),L=(n("a9e3"),n("b680"),Object(r["f"])({props:{beatMeter:{type:Object,required:!0},currentTime:{type:Number,required:!0}},emits:["update:beatMeter","start-play"],setup:function(t){var e=Object(r["a"])((function(){var e=t.beatMeter.offset*t.beatMeter.period,n=(t.currentTime-e)%t.beatMeter.period;return n/t.beatMeter.period<.25})),n=Object(r["a"])((function(){return e.value?"👏":"👐"})),o=Object(r["a"])((function(){return t.beatMeter.bpm.toFixed(1)})),a=Object(r["a"])((function(){var e=100*t.beatMeter.offset;return"".concat(e.toFixed(0)," %")}));return{bpmDisplay:o,offsetDisplay:a,beatIndicator:n}},methods:{tappedBeat:function(){this.$emit("start-play"),this.beatMeter.addBeats(this.currentTime)},resetClicked:function(){this.beatMeter.reset()}}}));n("3171");L.render=P,L.__scopeId="data-v-9bd0fa4a";var $=L,U=Object(r["C"])("data-v-9c0a769e");Object(r["r"])("data-v-9c0a769e");var A={class:"inputs"};Object(r["p"])();var q=U((function(t,e,n,o,a,i){return Object(r["o"])(),Object(r["c"])("label",null,[Object(r["u"])(t.$slots,"default"),Object(r["e"])("div",A,[Object(r["e"])("button",{onClick:e[1]||(e[1]=function(){return t.decrement.apply(t,arguments)})},"⬅️"),Object(r["e"])("input",{type:"text",inputmode:"decimal",value:t.inputText,onChange:e[2]||(e[2]=function(e){return t.newInput(e.target.value)})},null,40,["value"]),Object(r["e"])("button",{onClick:e[3]||(e[3]=function(){return t.increment.apply(t,arguments)})},"➡️")])])})),E=(n("c35a"),n("25f0"),Object(r["f"])({props:{modelValue:{type:Number,required:!0}},emits:["update:modelValue"],setup:function(t){var e=Object(r["y"])(t),n=e.modelValue,o=Object(r["t"])(D(n.value));return Object(r["B"])(n,(function(t){var e=z(o.value);null!=e&&e!==t&&(o.value=D(t))})),{inputText:o}},methods:{newInput:function(t){this.inputText=t;var e=z(t);null!=e&&this.$emit("update:modelValue",e)},increment:function(){this.$emit("update:modelValue",this.modelValue+1)},decrement:function(){this.$emit("update:modelValue",this.modelValue-1)}}}));function z(t){var e=Number.parseFloat(t);return isNaN(e)?null:e}function D(t){return t%1===0?t.toString():t.toFixed(2)}n("b7e9");E.render=q,E.__scopeId="data-v-9c0a769e";var R=E,J=n("d4ec"),G=n("bee2"),H=function(){function t(e,n){Object(J["a"])(this,t),this.start_=Math.max(0,e),this.duration_=Math.max(0,n)}return Object(G["a"])(t,[{key:"sanitizeInput",value:function(t,e){return isNaN(t)?e:Math.max(0,t)}},{key:"start",get:function(){return this.start_},set:function(t){this.start_=this.sanitizeInput(t,this.start)}},{key:"duration",get:function(){return this.duration_},set:function(t){this.duration_=this.sanitizeInput(t,this.duration)}},{key:"end",get:function(){return this.start+this.duration},set:function(t){var e=t-this.start;e>=0?this.duration=e:(this.start=this.start+e,this.duration=0)}}],[{key:"fromStartAndEnd",value:function(e,n){if(e<n){var r=n-e;return new t(e,r)}return null}}]),t}();n("99af"),n("4d90");function K(t){var e=t/60,n=e/60,r=Math.floor(n).toFixed(0).padStart(2,"0"),o=Math.floor(e%60).toFixed(0).padStart(2,"0"),a=Math.floor(t%60).toFixed(0).padStart(2,"0"),i=Math.floor(100*t%100).toFixed(0).padStart(2,"0"),c="".concat(r,":").concat(o,":").concat(a,".").concat(i);return c}n("d81d"),n("13d5"),n("fb6a");var Q=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Object(J["a"])(this,t),this.beats=e,this.period_=0,this.offset_=0,this.calculate(e)}return Object(G["a"])(t,[{key:"addBeats",value:function(){var t;(t=this.beats).push.apply(t,arguments),tt(this.beats),this.calculate(this.beats)}},{key:"reset",value:function(){this.beats=[],this.calculate(this.beats)}},{key:"calculate",value:function(t){this.period_=W(t),this.offset_=Y(t,this.period)}},{key:"period",get:function(){return this.period_}},{key:"bpm",get:function(){return 0===this.period?0:60/this.period}},{key:"offset",get:function(){return this.offset_}},{key:"needsMoreBeats",get:function(){return this.beats.length<2}}]),t}();function W(t){if(t.length<=1)return 0;var e=tt(X(t)),n=Z(e),r=n.reduce((function(t,e){return t+e}),0)/n.length;return r}function X(t){for(var e=new Array(t.length-1),n=0;n<t.length-1;n++){var r=t[n],o=t[n+1],a=o-r;e[n]=a}return e}function Y(t,e){if(0===e)return 0;var n=tt(t.map((function(t){return t%e}))),r=Z(n),o=r.reduce((function(t,e){return t+e}),0)/r.length;return o/e}function Z(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=t.length,o=Math.floor(r/e*n),a=Math.ceil(r/e*(e-n));return t.slice(o,a)}function tt(t){return t.sort((function(t,e){return t-e}))}var et=Object(r["f"])({components:{VideoPlayer:x,NumberInput:R,BeatSettings:$},setup:function(){var t=Object(r["t"])(null),e=Object(r["t"])(0),n=Object(r["a"])((function(){return K(e.value)})),o=Object(r["s"])(new Q),a=Object(r["a"])((function(){if(o.period>0){var t=o.offset*o.period;return Math.floor((e.value-t)/o.period)}return 0})),i=Object(r["s"])(new H(0,1)),c=Object(r["t"])(null),u=Object(r["a"])((function(){return null!=c.value})),s=Object(r["a"])((function(){return u.value?"Stop loop":"Start loop"}));return{player:t,currentTime:e,currentTimeIndicator:n,beatMeter:o,bar:a,range:i,intervallId:c,loopButtonText:s}},methods:{toggleLoop:function(){null==this.intervallId?this.startLoop():this.stopLoop()},startLoop:function(){var t=this;this.$_playLoopStart();var e=this.range.duration*this.beatMeter.period*1e3;this.intervallId=setInterval((function(){return t.$_playLoopStart()}),e)},stopLoop:function(){null!=this.intervallId&&(clearInterval(this.intervallId),this.intervallId=null)},videoPaused:function(){this.stopLoop()},loopStartToNowClicked:function(){this.range.start=this.bar},loopEndToNowClicked:function(){this.range.end=this.bar},$_playLoopStart:function(){var t=this.$_secondFromBar(this.range.start);this.player.seekToSecond(t),this.player.play()},$_pause:function(){this.player.pause()},$_secondFromBar:function(t){return t*this.beatMeter.period+this.beatMeter.offset}}});n("7d35");et.render=M,et.__scopeId="data-v-c6afb2ca";var nt=et,rt=[{path:"/",name:"Loopbar",component:nt}],ot=Object(u["a"])({history:Object(u["b"])(),routes:rt}),at=ot,it=n("5502"),ct=Object(it["a"])({state:{},mutations:{},actions:{},modules:{}});Object(r["b"])(i).use(ct).use(at).mount("#app")},d673:function(t,e,n){}});
//# sourceMappingURL=app.5d6a2196.js.map