(function(e){function t(t){for(var r,i,c=t[0],u=t[1],s=t[2],d=0,p=[];d<c.length;d++)i=c[d],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&p.push(a[i][0]),a[i]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);l&&l(t);while(p.length)p.shift()();return o.push.apply(o,s||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,c=1;c<n.length;c++){var u=n[c];0!==a[u]&&(r=!1)}r&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},a={app:0},o=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/loopbar/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var s=0;s<c.length;s++)t(c[s]);var l=u;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},3171:function(e,t,n){"use strict";n("cbf8")},"65f7":function(e,t,n){},8423:function(e,t,n){"use strict";n("c2f8")},"8dfa":function(e,t,n){"use strict";n("d230")},"9cdc":function(e,t,n){"use strict";n("d673")},b7e9:function(e,t,n){"use strict";n("65f7")},c2f8:function(e,t,n){},cbf8:function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23");function a(e,t,n,a,o,i){var c=Object(r["v"])("router-view");return Object(r["o"])(),Object(r["c"])(c)}n("9cdc");const o={};o.render=a;var i=o,c=n("9483");Object(c["a"])("".concat("/loopbar/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var u=n("6c02"),s=Object(r["C"])("data-v-1e10f306");Object(r["r"])("data-v-1e10f306");var l={class:"container"},d={class:"video-area"},p={class:"currentTime"},b={key:0},f={key:1,class:"missing-beats"},v={class:"loop-area"},h={class:"loop-settings"},O={class:"label"},j=Object(r["d"])("from "),m=Object(r["d"])("for duration"),y={class:"label"},g=Object(r["d"])("to ");Object(r["p"])();var M=s((function(e,t,n,a,o,i){var c=Object(r["v"])("VideoPlayer"),u=Object(r["v"])("NumberInput"),M=Object(r["v"])("BeatSettings");return Object(r["o"])(),Object(r["c"])("div",l,[Object(r["e"])("div",d,[Object(r["e"])(c,{ref:"player",onUpdatedTime:t[1]||(t[1]=function(t){return e.currentTime=t}),onPaused:e.videoPaused},null,8,["onPaused"]),Object(r["e"])("span",p,[e.beatMeter.needsMoreBeats?(Object(r["o"])(),Object(r["c"])("span",f," Set bpm below. ")):(Object(r["o"])(),Object(r["c"])("span",b," Beat #"+Object(r["x"])(e.bar),1)),Object(r["d"])(" ("+Object(r["x"])(e.currentTimeIndicator)+") ",1)])]),Object(r["e"])("div",v,[Object(r["e"])("button",{onClick:t[2]||(t[2]=function(t){return e.toggleLoop()})},Object(r["x"])(e.loopButtonText),1),Object(r["e"])("div",h,[Object(r["e"])(u,{modelValue:e.range.start,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.range.start=t})},{default:s((function(){return[Object(r["e"])("span",O,[j,Object(r["e"])("button",{onClick:t[3]||(t[3]=function(t){return e.loopStartToNowClicked()})},"now")])]})),_:1},8,["modelValue"]),Object(r["e"])(u,{modelValue:e.range.duration,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.range.duration=t})},{default:s((function(){return[m]})),_:1},8,["modelValue"]),Object(r["e"])(u,{modelValue:e.range.end,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.range.end=t})},{default:s((function(){return[Object(r["e"])("span",y,[g,Object(r["e"])("button",{onClick:t[6]||(t[6]=function(t){return e.loopEndToNowClicked()})},"now")])]})),_:1},8,["modelValue"])])]),Object(r["e"])(M,{ref:"beatSettings",currentTime:e.currentTime,beatMeter:e.beatMeter,"onUpdate:beatMeter":t[8]||(t[8]=function(t){return e.beatMeter=t}),onStartPlay:t[9]||(t[9]=function(t){return e.player.play()})},null,8,["currentTime","beatMeter"])])})),k=Object(r["C"])("data-v-35765380");Object(r["r"])("data-v-35765380");var _={class:"video-container"},w=Object(r["d"])(" Choose a video file ");Object(r["p"])();var S=k((function(e,t,n,a,o,i){return Object(r["o"])(),Object(r["c"])("div",_,[Object(r["e"])("label",null,[w,Object(r["e"])("input",{ref:"videoFileInput",type:"file",accept:"video/*",onChange:t[1]||(t[1]=function(){return e.videoFileSelected.apply(e,arguments)})},null,544)]),Object(r["e"])("video",{ref:"player",id:"player",controls:"",onPlaying:t[2]||(t[2]=function(t){return e.$emit("started-playing")}),onPause:t[3]||(t[3]=function(t){return e.$emit("paused")})},null,544)])})),T=(n("d3b7"),n("3ca3"),n("ddb0"),n("2b3d"),Object(r["f"])({emits:["updated-time","started-playing","paused"],setup:function(e,t){var n=Object(r["t"])(null),a=Object(r["t"])(null),o=Object(r["t"])(0),i=function e(){o.value=a.value.currentTime,t.emit("updated-time",o.value),requestAnimationFrame(e)};return Object(r["m"])(i),{videoFileInput:n,player:a,currentTime:o}},methods:{seekToSecond:function(e){this.player.currentTime=e},play:function(){this.player.play()},pause:function(){this.player.pause()},videoFileSelected:function(){var e,t=null===(e=this.videoFileInput.files)||void 0===e?void 0:e[0],n=URL.createObjectURL(t);this.player.src=n}}}));n("8423");T.render=S,T.__scopeId="data-v-35765380";var x=T,I=Object(r["C"])("data-v-9bd0fa4a");Object(r["r"])("data-v-9bd0fa4a");var C={class:"beat-settings"},V={class:"bpm-display"},F={key:0,class:"bpm"},B={class:"beat-indicator"},N={key:1,class:"missing-beats"};Object(r["p"])();var P=I((function(e,t,n,a,o,i){return Object(r["o"])(),Object(r["c"])("div",C,[Object(r["e"])("button",{onMousedown:t[1]||(t[1]=function(){return e.tappedBeat.apply(e,arguments)})},"Tap me to the beat",32),Object(r["e"])("div",V,[e.beatMeter.needsMoreBeats?(Object(r["o"])(),Object(r["c"])("span",N,"Set the beats per minute (bpm) by tapping the button.")):(Object(r["o"])(),Object(r["c"])("span",F,[Object(r["e"])("span",B,Object(r["x"])(e.beatIndicator),1),Object(r["d"])(" "+Object(r["x"])(e.bpmDisplay)+" bpm ",1)]))]),Object(r["e"])("button",{onClick:t[2]||(t[2]=function(){return e.resetClicked.apply(e,arguments)})},"Reset bpm")])})),L=(n("a9e3"),n("b680"),Object(r["f"])({props:{beatMeter:{type:Object,required:!0},currentTime:{type:Number,required:!0}},emits:["update:beatMeter","start-play"],setup:function(e){var t=Object(r["a"])((function(){var t=e.beatMeter.offset*e.beatMeter.period,n=(e.currentTime-t)%e.beatMeter.period;return n/e.beatMeter.period<.25})),n=Object(r["a"])((function(){return t.value?"👏":"👐"})),a=Object(r["a"])((function(){return e.beatMeter.bpm.toFixed(1)})),o=Object(r["a"])((function(){var t=100*e.beatMeter.offset;return"".concat(t.toFixed(0)," %")}));return{bpmDisplay:a,offsetDisplay:o,beatIndicator:n}},methods:{tappedBeat:function(){this.$emit("start-play"),this.beatMeter.addBeats(this.currentTime)},resetClicked:function(){this.beatMeter.reset()}}}));n("3171");L.render=P,L.__scopeId="data-v-9bd0fa4a";var $=L,U=Object(r["C"])("data-v-9c0a769e");Object(r["r"])("data-v-9c0a769e");var A={class:"inputs"};Object(r["p"])();var q=U((function(e,t,n,a,o,i){return Object(r["o"])(),Object(r["c"])("label",null,[Object(r["u"])(e.$slots,"default"),Object(r["e"])("div",A,[Object(r["e"])("button",{onClick:t[1]||(t[1]=function(){return e.decrement.apply(e,arguments)})},"⬅️"),Object(r["e"])("input",{type:"text",inputmode:"decimal",value:e.inputText,onChange:t[2]||(t[2]=function(t){return e.newInput(t.target.value)})},null,40,["value"]),Object(r["e"])("button",{onClick:t[3]||(t[3]=function(){return e.increment.apply(e,arguments)})},"➡️")])])})),E=(n("c35a"),n("25f0"),Object(r["f"])({props:{modelValue:{type:Number,required:!0}},emits:["update:modelValue"],setup:function(e){var t=Object(r["y"])(e),n=t.modelValue,a=Object(r["t"])(D(n.value));return Object(r["B"])(n,(function(e){var t=z(a.value);null!=t&&t!==e&&(a.value=D(e))})),{inputText:a}},methods:{newInput:function(e){this.inputText=e;var t=z(e);null!=t&&this.$emit("update:modelValue",t)},increment:function(){this.$emit("update:modelValue",this.modelValue+1)},decrement:function(){this.$emit("update:modelValue",this.modelValue-1)}}}));function z(e){var t=Number.parseFloat(e);return isNaN(t)?null:t}function D(e){return e%1===0?e.toString():e.toFixed(2)}n("b7e9");E.render=q,E.__scopeId="data-v-9c0a769e";var R=E,J=n("d4ec"),G=n("bee2"),H=function(){function e(t,n){Object(J["a"])(this,e),this.start_=Math.max(0,t),this.duration_=Math.max(0,n)}return Object(G["a"])(e,[{key:"sanitizeInput",value:function(e,t){return isNaN(e)?t:Math.max(0,e)}},{key:"start",get:function(){return this.start_},set:function(e){this.start_=this.sanitizeInput(e,this.start)}},{key:"duration",get:function(){return this.duration_},set:function(e){this.duration_=this.sanitizeInput(e,this.duration)}},{key:"end",get:function(){return this.start+this.duration},set:function(e){var t=e-this.start;t>=0?this.duration=t:(this.start=this.start+t,this.duration=0)}}],[{key:"fromStartAndEnd",value:function(t,n){if(t<n){var r=n-t;return new e(t,r)}return null}}]),e}();n("99af"),n("4d90");function K(e){var t=e/60,n=t/60,r=Math.floor(n).toFixed(0).padStart(2,"0"),a=Math.floor(t%60).toFixed(0).padStart(2,"0"),o=Math.floor(e%60).toFixed(0).padStart(2,"0"),i=Math.floor(100*e%100).toFixed(0).padStart(2,"0"),c="".concat(r,":").concat(a,":").concat(o,".").concat(i);return c}n("d81d"),n("13d5"),n("fb6a");var Q=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Object(J["a"])(this,e),this.beats=t,this.period_=0,this.offset_=0,this.calculate(t)}return Object(G["a"])(e,[{key:"addBeats",value:function(){var e;(e=this.beats).push.apply(e,arguments),ee(this.beats),this.calculate(this.beats)}},{key:"reset",value:function(){this.beats=[],this.calculate(this.beats)}},{key:"calculate",value:function(e){this.period_=W(e),this.offset_=Y(e,this.period)}},{key:"period",get:function(){return this.period_}},{key:"bpm",get:function(){return 0===this.period?0:60/this.period}},{key:"offset",get:function(){return this.offset_}},{key:"needsMoreBeats",get:function(){return this.beats.length<2}}]),e}();function W(e){if(e.length<=1)return 0;var t=ee(X(e)),n=Z(t),r=n.reduce((function(e,t){return e+t}),0)/n.length;return r}function X(e){for(var t=new Array(e.length-1),n=0;n<e.length-1;n++){var r=e[n],a=e[n+1],o=a-r;t[n]=o}return t}function Y(e,t){if(0===t)return 0;var n=ee(e.map((function(e){return e%t}))),r=Z(n),a=r.reduce((function(e,t){return e+t}),0)/r.length;return a/t}function Z(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=e.length,a=Math.floor(r/t*n),o=Math.ceil(r/t*(t-n));return e.slice(a,o)}function ee(e){return e.sort((function(e,t){return e-t}))}var te=Object(r["f"])({components:{VideoPlayer:x,NumberInput:R,BeatSettings:$},setup:function(){var e=Object(r["t"])(null),t=Object(r["t"])(0),n=Object(r["a"])((function(){return K(t.value)})),a=Object(r["s"])(new Q),o=Object(r["a"])((function(){if(a.period>0){var e=a.offset*a.period;return Math.floor((t.value-e)/a.period)}return 0})),i=Object(r["s"])(new H(0,1)),c=Object(r["t"])(null),u=Object(r["a"])((function(){return null!=c.value})),s=Object(r["a"])((function(){return u.value?"Stop loop":"Start loop"}));return{player:e,currentTime:t,currentTimeIndicator:n,beatMeter:a,bar:o,range:i,intervallId:c,loopButtonText:s}},methods:{toggleLoop:function(){null==this.intervallId?this.startLoop():this.stopLoop()},startLoop:function(){var e=this;this.$_playLoopStart();var t=this.range.duration*this.beatMeter.period*1e3;this.intervallId=setInterval((function(){return e.$_playLoopStart()}),t)},stopLoop:function(){null!=this.intervallId&&(clearInterval(this.intervallId),this.intervallId=null)},videoPaused:function(){this.stopLoop()},loopStartToNowClicked:function(){this.range.start=this.bar},loopEndToNowClicked:function(){this.range.end=this.bar},$_playLoopStart:function(){var e=this.$_secondFromBar(this.range.start);this.player.seekToSecond(e),this.player.play()},$_pause:function(){this.player.pause()},$_secondFromBar:function(e){return e*this.beatMeter.period+this.beatMeter.offset}}});n("8dfa");te.render=M,te.__scopeId="data-v-1e10f306";var ne=te,re=[{path:"/",name:"Loopbar",component:ne}],ae=Object(u["a"])({history:Object(u["b"])(),routes:re}),oe=ae,ie=n("5502"),ce=Object(ie["a"])({state:{},mutations:{},actions:{},modules:{}});Object(r["b"])(i).use(ce).use(oe).mount("#app")},d230:function(e,t,n){},d673:function(e,t,n){}});
//# sourceMappingURL=app.63b6c584.js.map