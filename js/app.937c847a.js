(function(e){function t(t){for(var r,u,i=t[0],c=t[1],l=t[2],d=0,f=[];d<i.length;d++)u=i[d],Object.prototype.hasOwnProperty.call(a,u)&&a[u]&&f.push(a[u][0]),a[u]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);s&&s(t);while(f.length)f.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,i=1;i<n.length;i++){var c=n[i];0!==a[c]&&(r=!1)}r&&(o.splice(t--,1),e=u(u.s=n[0]))}return e}var r={},a={app:0},o=[];function u(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.m=e,u.c=r,u.d=function(e,t,n){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},u.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)u.d(n,r,function(t){return e[t]}.bind(null,r));return n},u.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="/loopbar/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var s=c;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"25c7":function(e,t,n){"use strict";n("a995")},"53d6":function(e,t,n){"use strict";n("da80")},5653:function(e,t,n){"use strict";n("9eaf")},"9cdc":function(e,t,n){"use strict";n("d673")},"9eaf":function(e,t,n){},a995:function(e,t,n){},b51d:function(e,t,n){},b995:function(e,t,n){"use strict";n("b51d")},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23");function a(e,t,n,a,o,u){var i=Object(r["v"])("router-view");return Object(r["o"])(),Object(r["c"])(i)}n("9cdc");const o={};o.render=a;var u=o,i=n("9483");Object(i["a"])("".concat("/loopbar/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var c=n("6c02"),l=Object(r["E"])("data-v-4aae0695");Object(r["r"])("data-v-4aae0695");var s={class:"container"},d={class:"video-area"},f=Object(r["d"])(" Choose a video file "),p={class:"currentTime"},b={class:"loop-area"},v={class:"loop-settings"},m={class:"input-with-button"},O=Object(r["d"])("from"),j=Object(r["d"])("for duration"),h={class:"input-with-button"},y=Object(r["d"])("to");Object(r["p"])();var g=l((function(e,t,n,a,o,u){var i=Object(r["v"])("VideoPlayer"),c=Object(r["v"])("NumberInput"),g=Object(r["v"])("BeatSettings");return Object(r["o"])(),Object(r["c"])("div",s,[Object(r["e"])("div",d,[Object(r["e"])("label",null,[f,Object(r["e"])("input",{ref:"videoFileInput",type:"file",accept:"video/*",onChange:t[1]||(t[1]=function(){return e.videoFileSelected.apply(e,arguments)})},null,544)]),Object(r["e"])(i,{ref:"player",file:e.videoFile,onUpdatedTimeDisplay:t[2]||(t[2]=function(t){return e.currentTimeDisplay=t}),onPaused:e.videoPaused},null,8,["file","onPaused"]),Object(r["e"])("span",p," Beat #"+Object(r["x"])(e.bar)+" ("+Object(r["x"])(e.currentTimeIndicator)+") ",1)]),Object(r["e"])("div",b,[Object(r["e"])("button",{onClick:t[3]||(t[3]=function(t){return e.toggleLoop()})},Object(r["x"])(e.loopButtonText),1),Object(r["e"])("div",v,[Object(r["e"])("div",m,[Object(r["e"])(c,{modelValue:e.range.start,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.range.start=t})},{default:l((function(){return[O]})),_:1},8,["modelValue"]),Object(r["e"])("button",{onClick:t[5]||(t[5]=function(t){return e.loopStartToNowClicked()})},"set to now")]),Object(r["e"])(c,{modelValue:e.range.duration,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.range.duration=t})},{default:l((function(){return[j]})),_:1},8,["modelValue"]),Object(r["e"])("div",h,[Object(r["e"])(c,{modelValue:e.range.end,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.range.end=t})},{default:l((function(){return[y]})),_:1},8,["modelValue"]),Object(r["e"])("button",{onClick:t[8]||(t[8]=function(t){return e.loopEndToNowClicked()})},"set to now")])])]),Object(r["e"])(g,{currentTimeDisplay:e.currentTimeDisplay,getCurrentTime:e.getCurrentTime,bpm:e.bpm,"onUpdate:bpm":t[9]||(t[9]=function(t){return e.bpm=t}),offset:e.offset,"onUpdate:offset":t[10]||(t[10]=function(t){return e.offset=t}),onStartPlay:t[11]||(t[11]=function(t){return e.player.play()})},null,8,["currentTimeDisplay","getCurrentTime","bpm","offset"])])})),k=(n("b0c0"),n("3835")),T=Object(r["E"])("data-v-13dc78a5"),w=T((function(e,t,n,a,o,u){return Object(r["o"])(),Object(r["c"])("video",{ref:"player",id:"player",src:e.source,controls:"",onPlaying:t[1]||(t[1]=function(t){return e.$emit("started-playing")}),onPause:t[2]||(t[2]=function(t){return e.$emit("paused")})},null,40,["src"])})),x=(n("d3b7"),n("3ca3"),n("ddb0"),n("2b3d"),Object(r["f"])({props:{file:{type:File}},emits:["updated-time-display","started-playing","paused"],setup:function(e,t){var n=Object(r["t"])(null),a=Object(r["a"])((function(){if(null!=e.file){var t=URL.createObjectURL(e.file);return t}return null})),o=null,u=function e(){var r=n.value.currentTime;o!==r&&(o=r,t.emit("updated-time-display",r)),requestAnimationFrame(e)};return Object(r["m"])(u),{player:n,source:a}},methods:{getCurrentTime:function(){return this.player.currentTime},seekToSecond:function(e){this.player.currentTime=e},play:function(){this.player.play()},pause:function(){this.player.pause()}}}));n("5653");x.render=w,x.__scopeId="data-v-13dc78a5";var _=x,C=Object(r["E"])("data-v-798557d0");Object(r["r"])("data-v-798557d0");var I={class:"beat-settings"},S={class:"visualization"},V={class:"beat-indicator"},F={class:"settings-area"},M={class:"meter setting"},N={class:"header"},B=Object(r["d"])(" Use tap settings "),D={class:"bpm-display"},P={key:0,class:"missing-beats"},L={key:1,class:"bpm"},U={class:"custom setting"},A={class:"header"},E=Object(r["d"])(" Use custom settings "),q=Object(r["d"])("Beats per minute (bpm)"),$=Object(r["d"])("Offset");Object(r["p"])();var z=C((function(e,t,n,a,o,u){var i=Object(r["v"])("NumberInput");return Object(r["o"])(),Object(r["c"])("div",I,[Object(r["e"])("div",S,[Object(r["e"])("span",V,Object(r["x"])(e.beatIndicator),1),Object(r["d"])(" "+Object(r["x"])(e.bpmDisplay)+" bpm ",1)]),Object(r["e"])("div",F,[Object(r["e"])("div",M,[Object(r["e"])("div",N,[Object(r["e"])("label",null,[Object(r["D"])(Object(r["e"])("input",{type:"radio",name:"beatInput",value:"meter","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.beatInput=t}),disabled:e.beatMeter.needsMoreBeats},null,8,["disabled"]),[[r["A"],e.beatInput]]),B])]),Object(r["e"])("button",{onMousedown:t[2]||(t[2]=function(){return e.tappedBeat.apply(e,arguments)})},"Tap me to the beat",32),Object(r["e"])("div",D,[e.beatMeter.needsMoreBeats?(Object(r["o"])(),Object(r["c"])("span",P," Set the beats per minute (bpm) by tapping the button. ")):(Object(r["o"])(),Object(r["c"])("span",L,Object(r["x"])(e.meterBpmDisplay)+" bpm (offset "+Object(r["x"])(e.meterOffsetDisplay)+") ",1))]),Object(r["e"])("button",{onClick:t[3]||(t[3]=function(){return e.resetClicked.apply(e,arguments)})},"Reset bpm")]),Object(r["e"])("div",U,[Object(r["e"])("div",A,[Object(r["e"])("label",null,[Object(r["D"])(Object(r["e"])("input",{type:"radio",name:"beatInput",value:"custom","onUpdate:modelValue":t[4]||(t[4]=function(t){return e.beatInput=t})},null,512),[[r["A"],e.beatInput]]),E])]),Object(r["e"])(i,{modelValue:e.customBpm,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.customBpm=t})},{default:C((function(){return[q]})),_:1},8,["modelValue"]),Object(r["e"])(i,{modelValue:e.customOffset,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.customOffset=t})},{default:C((function(){return[$]})),_:1},8,["modelValue"])])])])})),J=(n("a9e3"),n("b680"),Object(r["E"])("data-v-739920af"));Object(r["r"])("data-v-739920af");var R={class:"inputs"};Object(r["p"])();var G=J((function(e,t,n,a,o,u){return Object(r["o"])(),Object(r["c"])("div",null,[Object(r["e"])("label",null,[Object(r["u"])(e.$slots,"default"),Object(r["e"])("div",R,[Object(r["e"])("button",{onClick:t[1]||(t[1]=function(){return e.decrement.apply(e,arguments)})},"⬅️"),Object(r["e"])("input",{type:"text",inputmode:"decimal",value:e.inputText,onChange:t[2]||(t[2]=function(t){return e.newInput(t.target.value)})},null,40,["value"]),Object(r["e"])("button",{onClick:t[3]||(t[3]=function(){return e.increment.apply(e,arguments)})},"➡️")])])])})),H=(n("c35a"),n("25f0"),Object(r["f"])({props:{modelValue:{type:Number,required:!0}},emits:["update:modelValue"],setup:function(e){var t=Object(r["y"])(e),n=t.modelValue,a=Object(r["t"])(Q(n.value));return Object(r["C"])(n,(function(e){var t=K(a.value);null!=t&&t!==e&&(a.value=Q(e))})),{inputText:a}},methods:{newInput:function(e){this.inputText=e;var t=K(e);null!=t&&this.$emit("update:modelValue",t)},increment:function(){this.$emit("update:modelValue",this.modelValue+1)},decrement:function(){this.$emit("update:modelValue",this.modelValue-1)}}}));function K(e){var t=Number.parseFloat(e);return isNaN(t)?null:t}function Q(e){return e%1===0?e.toString():e.toFixed(2)}n("b995");H.render=G,H.__scopeId="data-v-739920af";var W=H,X=(n("d81d"),n("13d5"),n("fb6a"),n("d4ec")),Y=n("bee2"),Z=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Object(X["a"])(this,e),this.beats=t,this.period_=0,this.offset_=0,this.calculate(t)}return Object(Y["a"])(e,[{key:"addBeats",value:function(){var e;(e=this.beats).push.apply(e,arguments),ue(this.beats),this.calculate(this.beats)}},{key:"reset",value:function(){this.beats=[],this.calculate(this.beats)}},{key:"calculate",value:function(e){this.period_=ne(e),this.offset_=ae(e,this.period)}},{key:"period",get:function(){return this.period_}},{key:"bpm",get:function(){return 0===this.period?0:ee(this.period)}},{key:"offset",get:function(){return this.offset_}},{key:"needsMoreBeats",get:function(){return this.beats.length<2}}]),e}();function ee(e){return 60/e}function te(e){return 60/e}function ne(e){if(e.length<=1)return 0;var t=ue(re(e)),n=oe(t),r=n.reduce((function(e,t){return e+t}),0)/n.length;return r}function re(e){for(var t=new Array(e.length-1),n=0;n<e.length-1;n++){var r=e[n],a=e[n+1],o=a-r;t[n]=o}return t}function ae(e,t){if(0===t)return 0;var n=ue(e.map((function(e){return e%t}))),r=oe(n),a=r.reduce((function(e,t){return e+t}),0)/r.length;return a/t}function oe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=e.length,a=Math.floor(r/t*n),o=Math.ceil(r/t*(t-n));return e.slice(a,o)}function ue(e){return e.sort((function(e,t){return e-t}))}var ie=Object(r["f"])({components:{NumberInput:W},props:{bpm:{type:Number,required:!0},offset:{type:Number,required:!0},currentTimeDisplay:{type:Number,required:!0},getCurrentTime:{type:Function,required:!0}},emits:["update:bpm","update:offset","start-play"],setup:function(e,t){var n=Object(r["t"])("custom"),a=Object(r["a"])({get:function(){return e.bpm},set:function(e){return t.emit("update:bpm",e)}}),o=Object(r["a"])({get:function(){return e.offset},set:function(e){return t.emit("update:offset",e)}}),u=Object(r["s"])(new Z),i=Object(r["a"])((function(){return"meter"===n.value?u.period:te(a.value)})),c=Object(r["a"])((function(){return"meter"===n.value?u.bpm:a.value})),l=Object(r["a"])((function(){return"meter"===n.value?u.offset:o.value}));Object(r["C"])(c,(function(e){return t.emit("update:bpm",e)})),Object(r["C"])(l,(function(e){return t.emit("update:offset",e)}));var s=Object(r["a"])((function(){var t=l.value*i.value,n=(e.currentTimeDisplay-t)%i.value;return n/i.value<.25})),d=Object(r["a"])((function(){return s.value?"👏":"👐"})),f=Object(r["a"])((function(){return u.bpm.toFixed(1)})),p=Object(r["a"])((function(){return"".concat(u.offset.toFixed(1)," %")})),b=Object(r["a"])((function(){return c.value.toFixed(1)})),v=Object(r["a"])((function(){var e=100*l.value;return"".concat(e.toFixed(0)," %")}));return{customBpm:a,customOffset:o,meterBpmDisplay:f,meterOffsetDisplay:p,bpmDisplay:b,offsetDisplay:v,beatMeter:u,beatIndicator:d,beatInput:n}},methods:{tappedBeat:function(){this.$emit("start-play"),this.beatMeter.addBeats(this.getCurrentTime())},resetClicked:function(){this.beatMeter.reset()}}});n("53d6");ie.render=z,ie.__scopeId="data-v-798557d0";var ce=ie,le=function(){function e(t,n){Object(X["a"])(this,e),this.start_=Math.max(0,t),this.duration_=Math.max(0,n)}return Object(Y["a"])(e,[{key:"sanitizeInput",value:function(e,t){return isNaN(e)?t:Math.max(0,e)}},{key:"start",get:function(){return this.start_},set:function(e){this.start_=this.sanitizeInput(e,this.start)}},{key:"duration",get:function(){return this.duration_},set:function(e){this.duration_=this.sanitizeInput(e,this.duration)}},{key:"end",get:function(){return this.start+this.duration},set:function(e){var t=e-this.start;t>=0?this.duration=t:(this.start=this.start+t,this.duration=0)}}],[{key:"fromStartAndEnd",value:function(t,n){if(t<n){var r=n-t;return new e(t,r)}return null}}]),e}();n("99af"),n("4d90");function se(e){var t=e/60,n=t/60,r=Math.floor(n).toFixed(0).padStart(2,"0"),a=Math.floor(t%60).toFixed(0).padStart(2,"0"),o=Math.floor(e%60).toFixed(0).padStart(2,"0"),u=Math.floor(100*e%100).toFixed(0).padStart(2,"0"),i="".concat(r,":").concat(a,":").concat(o,".").concat(u);return i}var de=Object(r["f"])({components:{VideoPlayer:_,NumberInput:W,BeatSettings:ce},setup:function(){var e=Object(r["t"])(null),t=Object(r["t"])(null),n=Object(r["t"])(null),a=Object(r["t"])(0),o=Object(r["a"])((function(){return se(a.value)})),u=Object(r["t"])(120),i=Object(r["a"])((function(){return te(u.value)})),c=Object(r["t"])(0),l=Object(r["a"])((function(){if(i.value>0){var e=c.value*i.value;return Math.floor((a.value-e)/i.value)}return 0})),s=function(e,t){localStorage.setItem(e.name,JSON.stringify(t))},d=function(e){var t=localStorage.getItem(e.name);return null!==t?JSON.parse(t):null};Object(r["C"])([u,c],(function(e){var n=Object(k["a"])(e,2),r=n[0],a=n[1];null!==t.value&&s(t.value,{bpm:r,offset:a})})),Object(r["C"])(t,(function(e){if(null!==e){var t=d(e);null!==t&&(u.value=t.bpm,c.value=t.offset)}}));var f=Object(r["s"])(new le(0,1)),p=Object(r["t"])(!1),b=Object(r["a"])((function(){return p.value?"Stop loop":"Start loop"})),v=function(){var e=fe(f.start,i.value,c.value);n.value.seekToSecond(e),n.value.play()};return Object(r["C"])([p,a,f],(function(e){var t=Object(k["a"])(e,3),n=t[0],r=t[1],a=t[2],o=.1,u=fe(a.start,i.value,c.value)-o,l=fe(a.end,i.value,c.value),s=u<r&&r<l;n&&!s&&v()})),{videoFileInput:e,videoFile:t,player:n,currentTimeDisplay:a,currentTimeIndicator:o,bpm:u,period:i,offset:c,bar:l,isLooping:p,range:f,loopButtonText:b}},methods:{videoFileSelected:function(){var e=this.videoFileInput.files;if(null!==e&&0!==e.length){var t=e[0];null!=t&&(this.videoFile=t)}},getCurrentTime:function(){return null!==this.player?this.player.getCurrentTime():0},toggleLoop:function(){this.isLooping?this.stopLoop():this.startLoop()},startLoop:function(){this.isLooping=!0},stopLoop:function(){this.isLooping=!1},videoPaused:function(){this.stopLoop()},loopStartToNowClicked:function(){this.range.start=this.bar},loopEndToNowClicked:function(){this.range.end=this.bar}}});function fe(e,t,n){var r=n*t;return e*t+r}n("25c7");de.render=g,de.__scopeId="data-v-4aae0695";var pe=de,be=[{path:"/",name:"Loopbar",component:pe}],ve=Object(c["a"])({history:Object(c["b"])(),routes:be}),me=ve,Oe=n("5502"),je=Object(Oe["a"])({state:{},mutations:{},actions:{},modules:{}});Object(r["b"])(u).use(je).use(me).mount("#app")},d673:function(e,t,n){},da80:function(e,t,n){}});
//# sourceMappingURL=app.937c847a.js.map