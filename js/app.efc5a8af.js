(function(e){function t(t){for(var a,o,i=t[0],c=t[1],l=t[2],f=0,d=[];f<i.length;f++)o=i[f],Object.prototype.hasOwnProperty.call(u,o)&&u[o]&&d.push(u[o][0]),u[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);s&&s(t);while(d.length)d.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],a=!0,i=1;i<n.length;i++){var c=n[i];0!==u[c]&&(a=!1)}a&&(r.splice(t--,1),e=o(o.s=n[0]))}return e}var a={},u={app:0},r=[];function o(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=a,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(n,a,function(t){return e[t]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/loopbar/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var s=c;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},1288:function(e,t,n){"use strict";n("23d3")},2391:function(e,t,n){},"23d3":function(e,t,n){},"42cd":function(e,t,n){"use strict";n("f17c")},"5b5b":function(e,t,n){"use strict";n("2391")},"5f79":function(e,t,n){},"6fc2":function(e,t,n){"use strict";n("5f79")},a958:function(e,t,n){"use strict";n("ba60")},b0a7:function(e,t,n){},ba60:function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("7a23");function u(e,t){var n=Object(a["w"])("router-view");return Object(a["p"])(),Object(a["c"])(n)}n("1288");const r={};r.render=u;var o=r,i=n("9483");Object(i["a"])("".concat("/loopbar/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var c=n("6c02"),l=Object(a["I"])("data-v-73f8586a");Object(a["s"])("data-v-73f8586a");var s={class:"root-container"},f={key:0,class:"control-container"},d={class:"video-area"},p={class:"video-controls"},b={class:"control-group"},m=Object(a["e"])("Speed (in %)"),v={class:"control-group"},O={class:"compact-label"},j=Object(a["e"])(" Loop "),h={class:"control-group"},y={class:"compact-label"},g=Object(a["e"])(" Mirrored "),k={class:"currentTime"},S={class:"loop-area"},V={class:"loop-settings"},w={class:"input-with-button"},x=Object(a["e"])("from"),T=Object(a["e"])("for duration"),I={class:"input-with-button"},F=Object(a["e"])("to"),C={class:"loop-settings"},N=Object(a["e"])(" Shift loop "),_=Object(a["e"])("Shift multiplier"),B=Object(a["e"])(" Choose a video file ");Object(a["q"])();var M=l((function(e,t,n,u,r,o){var i=Object(a["w"])("VideoPlayer"),c=Object(a["w"])("NumberInput"),M=Object(a["w"])("Slider"),P=Object(a["w"])("BeatSettings");return Object(a["p"])(),Object(a["c"])("div",s,[null!==e.videoFile?(Object(a["p"])(),Object(a["c"])("div",f,[Object(a["f"])("div",d,[Object(a["f"])(i,{ref:"player",class:"player",file:e.videoFile,"onUpdate:timeDisplay":t[1]||(t[1]=function(t){return e.currentTimeDisplay=t}),"onUpdate:isPlaying":t[2]||(t[2]=function(t){return e.isPlaying=t}),playbackRate:e.playbackRate,"onUpdate:playbackRate":t[3]||(t[3]=function(t){return e.playbackRate=t}),"onUpdate:duration":t[4]||(t[4]=function(t){return e.duration=t}),mirrored:e.mirrored},null,8,["file","playbackRate","mirrored"]),Object(a["f"])("div",p,[Object(a["f"])("div",b,[Object(a["f"])("button",{onClick:t[5]||(t[5]=function(t){return e.togglePlay()})},Object(a["y"])(e.playButtonText),1),Object(a["f"])(c,{modelValue:e.playbackRatePercent,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.playbackRatePercent=t})},{default:l((function(){return[m]})),_:1},8,["modelValue"])]),Object(a["f"])("div",v,[Object(a["f"])("label",O,[Object(a["H"])(Object(a["f"])("input",{type:"checkbox","onUpdate:modelValue":t[7]||(t[7]=function(t){return e.isLooping=t})},null,512),[[a["C"],e.isLooping]]),j]),Object(a["f"])("button",{onClick:t[8]||(t[8]=function(t){return e.goToLoopStart()})},"Go to loop start")]),Object(a["f"])("div",h,[Object(a["f"])("label",y,[Object(a["H"])(Object(a["f"])("input",{type:"checkbox","onUpdate:modelValue":t[9]||(t[9]=function(t){return e.mirrored=t})},null,512),[[a["C"],e.mirrored]]),g])])]),Object(a["f"])("span",k," Beat #"+Object(a["y"])(e.bar)+" ("+Object(a["y"])(e.currentTimeIndicator)+") ",1),Object(a["f"])(M,{class:"time-slider",modelValue:e.currentTimeDisplay,"onUpdate:modelValue":t[10]||(t[10]=function(t){return e.seekToSecond(t)}),min:0,max:e.duration,step:.01},null,8,["modelValue","max"])]),Object(a["f"])("div",S,[Object(a["f"])("button",{onClick:t[11]||(t[11]=function(t){return e.toggleLoop()})},Object(a["y"])(e.loopButtonText),1),Object(a["f"])("div",V,[Object(a["f"])("div",w,[Object(a["f"])(c,{modelValue:e.range.start,"onUpdate:modelValue":t[12]||(t[12]=function(t){return e.range.setStart(t)}),class:"narrow-input"},{default:l((function(){return[x]})),_:1},8,["modelValue"]),Object(a["f"])("button",{onClick:t[13]||(t[13]=function(t){return e.loopStartToNowClicked()})},"set to now")]),Object(a["f"])(c,{modelValue:e.range.duration,"onUpdate:modelValue":t[14]||(t[14]=function(t){return e.range.setDurationByShiftingEnd(t)}),class:"narrow-input"},{default:l((function(){return[T]})),_:1},8,["modelValue"]),Object(a["f"])("div",I,[Object(a["f"])(c,{modelValue:e.range.end,"onUpdate:modelValue":t[15]||(t[15]=function(t){return e.range.setEnd(t)}),class:"narrow-input"},{default:l((function(){return[F]})),_:1},8,["modelValue"]),Object(a["f"])("button",{onClick:t[16]||(t[16]=function(t){return e.loopEndToNowClicked()})},"set to now")])]),Object(a["f"])("div",C,[N,Object(a["f"])("button",{onClick:t[17]||(t[17]=function(t){return e.shiftLoop(-1)})},"⬅️"),Object(a["f"])("button",{onClick:t[18]||(t[18]=function(t){return e.shiftLoop(1)})},"➡️️"),Object(a["f"])(c,{modelValue:e.shiftMultiplier,"onUpdate:modelValue":t[19]||(t[19]=function(t){return e.shiftMultiplier=t})},{default:l((function(){return[_]})),_:1},8,["modelValue"])])]),Object(a["f"])(P,{class:"beat-settings",currentTimeDisplay:e.currentTimeDisplay,getCurrentTime:e.getCurrentTime,customBpm:e.customBpm,customOffset:e.customOffset,"onUpdate:bpm":t[20]||(t[20]=function(t){return e.bpm=t}),"onUpdate:offset":t[21]||(t[21]=function(t){return e.offset=t}),onStartPlay:t[22]||(t[22]=function(t){return e.player.play()})},null,8,["currentTimeDisplay","getCurrentTime","customBpm","customOffset"])])):Object(a["d"])("",!0),Object(a["f"])("label",null,[B,Object(a["f"])("input",{ref:"videoFileInput",type:"file",accept:"video/*",onChange:t[23]||(t[23]=function(){return e.videoFileSelected.apply(e,arguments)})},null,544)])])})),P=(n("b0c0"),n("3835")),L=Object(a["I"])("data-v-0120fb31"),D=L((function(e,t,n,u,r,o){return Object(a["p"])(),Object(a["c"])("video",{ref:"player",class:{mirrored:e.mirrored},src:e.source,onLoadedmetadata:t[1]||(t[1]=function(t){return e.durationChanged()}),onClick:t[2]||(t[2]=function(t){return e.togglePlay()}),onPlaying:t[3]||(t[3]=function(t){return e.$emit("update:isPlaying",!0)}),onPause:t[4]||(t[4]=function(t){return e.$emit("update:isPlaying",!1)}),onRatechange:t[5]||(t[5]=function(t){return e.rateChanged()}),onDuration:t[6]||(t[6]=function(t){return e.durationChanged()})},null,42,["src"])})),U=(n("a9e3"),n("d3b7"),n("3ca3"),n("ddb0"),n("2b3d"),Object(a["g"])({props:{file:{type:Object},playbackRate:{type:Number,default:1},mirrored:{type:Boolean,default:!1}},emits:["update:time-display","update:isPlaying","update:playbackRate","update:duration"],setup:function(e,t){var n=Object(a["u"])(null),u=Object(a["a"])((function(){if(null!=e.file){var t=URL.createObjectURL(e.file);return t}return null}));Object(a["F"])(Object(a["z"])(e,"playbackRate"),(function(e){n.value.playbackRate=e}));var r=null,o=function e(){var a,u=null===(a=n.value)||void 0===a?void 0:a.currentTime;null!==u&&r!==u&&(r=u,t.emit("update:time-display",u)),requestAnimationFrame(e)};return Object(a["n"])(o),{player:n,source:u}},methods:{getCurrentTime:function(){return this.player.currentTime},seekToSecond:function(e){this.player.currentTime=e},togglePlay:function(){this.player.paused||this.player.ended?this.play():this.player.pause()},play:function(){this.player.play()},pause:function(){this.player.pause()},rateChanged:function(){var e=this.player.playbackRate;this.$emit("update:playbackRate",e)},durationChanged:function(){var e=this.player.duration;this.$emit("update:duration",e)}}}));n("a958");U.render=D,U.__scopeId="data-v-0120fb31";var R=U,$=Object(a["I"])("data-v-ef6d8c70");Object(a["s"])("data-v-ef6d8c70");var E={class:"beat-settings"},q={class:"visualization"},A={class:"beat-indicator"},z={class:"settings-area"},H={class:"custom setting"},J={class:"header"},G=Object(a["e"])(" Use custom settings "),K={class:"inputs"},Q=Object(a["e"])("Beats per minute (bpm)"),W=Object(a["e"])(" Offset "),X=Object(a["e"])(" % of bpm"),Y={class:"meter setting"},Z={class:"header"},ee={key:0},te={class:"inputs"},ne={class:"bpm-display"},ae={key:0,class:"missing-beats"},ue={key:1,class:"bpm"};Object(a["q"])();var re=$((function(e,t,n,u,r,o){var i=Object(a["w"])("NumberInput"),c=Object(a["w"])("SliderInput");return Object(a["p"])(),Object(a["c"])("div",E,[Object(a["f"])("div",q,[Object(a["f"])("span",A,Object(a["y"])(e.beatIndicator),1),Object(a["e"])(" "+Object(a["y"])(e.bpmDisplay)+" bpm ",1)]),Object(a["f"])("div",z,[Object(a["f"])("div",H,[Object(a["f"])("div",J,[Object(a["f"])("label",null,[Object(a["H"])(Object(a["f"])("input",{type:"radio",name:"beatInput",value:"custom","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.beatInput=t})},null,512),[[a["D"],e.beatInput]]),G])]),Object(a["f"])("div",K,[Object(a["f"])(i,{modelValue:e.customBpmRef,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.customBpmRef=t})},{default:$((function(){return[Q]})),_:1},8,["modelValue"]),Object(a["f"])(c,{modelValue:e.customOffsetPercent,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.customOffsetPercent=t}),min:-50,max:50},{unit:$((function(){return[X]})),default:$((function(){return[W]})),_:1},8,["modelValue"])])]),Object(a["f"])("div",Y,[Object(a["f"])("div",Z,[Object(a["f"])("label",null,[Object(a["H"])(Object(a["f"])("input",{type:"radio",name:"beatInput",value:"meter","onUpdate:modelValue":t[4]||(t[4]=function(t){return e.beatInput=t}),disabled:e.beatMeter.needsMoreBeats},null,8,["disabled"]),[[a["D"],e.beatInput]]),Object(a["f"])("div",null,[Object(a["f"])("span",{class:{disabled:e.beatMeter.needsMoreBeats}},"Use tap settings",2),e.beatMeter.needsMoreBeats?(Object(a["p"])(),Object(a["c"])("span",ee," (unavailable until set)")):Object(a["d"])("",!0)])])]),Object(a["f"])("div",te,[Object(a["f"])("button",{onMousedown:t[5]||(t[5]=function(){return e.tappedBeat.apply(e,arguments)})},"Tap me to the beat",32),Object(a["f"])("div",ne,[e.beatMeter.needsMoreBeats?(Object(a["p"])(),Object(a["c"])("span",ae," Set the beats per minute (bpm) by tapping the button. ")):(Object(a["p"])(),Object(a["c"])("span",ue,Object(a["y"])(e.meterBpmDisplay)+" bpm (offset "+Object(a["y"])(e.meterOffsetDisplay)+") ",1))]),Object(a["f"])("button",{onClick:t[6]||(t[6]=function(){return e.resetClicked.apply(e,arguments)})},"Reset bpm")])])])])})),oe=(n("b680"),Object(a["I"])("data-v-546d46d6"));Object(a["s"])("data-v-546d46d6");var ie={class:"number-input"},ce={class:"label"};Object(a["q"])();var le=oe((function(e,t,n,u,r,o){return Object(a["p"])(),Object(a["c"])("div",ie,[Object(a["f"])("button",{class:"first-button",onClick:t[1]||(t[1]=function(){return e.decrement.apply(e,arguments)})},"⬅️"),Object(a["f"])("label",null,[Object(a["f"])("div",ce,[Object(a["v"])(e.$slots,"default")]),Object(a["f"])("input",{class:"input",type:"text",inputmode:"decimal",size:"2",value:e.inputText,onChange:t[2]||(t[2]=function(t){return e.newInput(t.target.value)}),onFocus:t[3]||(t[3]=function(e){return e.target.select()})},null,40,["value"])]),Object(a["f"])("button",{class:"second-button",onClick:t[4]||(t[4]=function(){return e.increment.apply(e,arguments)})},"➡️")])})),se=(n("c35a"),n("25f0"),Object(a["g"])({props:{modelValue:{type:Number,required:!0}},emits:["update:modelValue"],setup:function(e){var t=Object(a["A"])(e),n=t.modelValue,u=Object(a["u"])(de(n.value));return Object(a["F"])(n,(function(e){var t=fe(u.value);null!=t&&t!==e&&(u.value=de(e))})),{inputText:u}},methods:{newInput:function(e){this.inputText=e;var t=fe(e);null!=t&&this.$emit("update:modelValue",t)},increment:function(){this.$emit("update:modelValue",this.modelValue+1)},decrement:function(){this.$emit("update:modelValue",this.modelValue-1)}}}));function fe(e){var t=Number.parseFloat(e);return isNaN(t)?null:t}function de(e){return e%1===0?e.toString():e.toFixed(2)}n("42cd");se.render=le,se.__scopeId="data-v-546d46d6";var pe=se,be=Object(a["I"])("data-v-47869579");Object(a["s"])("data-v-47869579");var me={class:"inputs"};Object(a["q"])();var ve=be((function(e,t,n,u,r,o){var i=Object(a["w"])("Slider");return Object(a["p"])(),Object(a["c"])("div",null,[Object(a["f"])("label",null,[Object(a["v"])(e.$slots,"default"),Object(a["f"])("div",me,[Object(a["f"])("div",null,[Object(a["f"])("input",{type:"text",inputmode:"decimal",value:e.inputText,onChange:t[1]||(t[1]=function(t){return e.newTextInput(t.target.value)})},null,40,["value"]),Object(a["f"])("span",null,[Object(a["v"])(e.$slots,"unit")])]),Object(a["f"])(i,{modelValue:e.modelValue,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.$emit("update:modelValue",t)}),min:e.min,max:e.max,step:e.step},null,8,["modelValue","min","max","step"])])])])})),Oe=Object(a["I"])("data-v-777acaa2"),je=Oe((function(e,t,n,u,r,o){return Object(a["p"])(),Object(a["c"])("input",{type:"range",value:e.modelValue,onInput:t[1]||(t[1]=function(t){return e.newSliderInput(t.target.value)}),min:e.min,max:e.max,step:e.step},null,40,["value","min","max","step"])})),he=Object(a["g"])({props:{modelValue:{type:Number,required:!0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1}},emits:["update:modelValue"],methods:{newSliderInput:function(e){var t=ye(e);null!=t&&this.$emit("update:modelValue",t)}}});function ye(e){var t=Number.parseFloat(e);return isNaN(t)?null:t}he.render=je,he.__scopeId="data-v-777acaa2";var ge=he,ke=Object(a["g"])({components:{Slider:ge},props:{modelValue:{type:Number,required:!0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1}},emits:["update:modelValue"],setup:function(e){var t=Object(a["A"])(e),n=t.modelValue,u=Object(a["u"])(Ve(n.value,e.step)),r=Object(a["a"])((function(){return n.value.toFixed(0)}));return Object(a["F"])(n,(function(t){var n=Se(u.value);null!=n&&n!==t&&(u.value=Ve(t,e.step))})),{inputText:u,modelValueDisplay:r}},methods:{newTextInput:function(e){this.inputText=e;var t=Se(e);null!=t&&this.$emit("update:modelValue",t)},newSliderInput:function(e){var t=Se(e);null!=t&&this.$emit("update:modelValue",t)}}});function Se(e){var t=Number.parseFloat(e);return isNaN(t)?null:t}function Ve(e,t){var n=t%1;return 0===n?e.toFixed(0):e.toFixed(2)}n("6fc2");ke.render=ve,ke.__scopeId="data-v-47869579";var we=ke,xe=(n("d81d"),n("13d5"),n("fb6a"),n("d4ec")),Te=n("bee2"),Ie=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Object(xe["a"])(this,e),this.beats=t,this.period_=0,this.offset_=0,this.calculate(t)}return Object(Te["a"])(e,[{key:"addBeats",value:function(){var e;(e=this.beats).push.apply(e,arguments),Pe(this.beats),this.calculate(this.beats)}},{key:"reset",value:function(){this.beats=[],this.calculate(this.beats)}},{key:"calculate",value:function(e){this.period_=Ne(e),this.offset_=Be(e,this.period)}},{key:"period",get:function(){return this.period_}},{key:"bpm",get:function(){return 0===this.period?0:Fe(this.period)}},{key:"offset",get:function(){return this.offset_}},{key:"needsMoreBeats",get:function(){return this.beats.length<2}}]),e}();function Fe(e){return 60/e}function Ce(e){return 60/e}function Ne(e){if(e.length<=1)return 0;var t=Pe(_e(e)),n=Me(t),a=n.reduce((function(e,t){return e+t}),0)/n.length;return a}function _e(e){for(var t=new Array(e.length-1),n=0;n<e.length-1;n++){var a=e[n],u=e[n+1],r=u-a;t[n]=r}return t}function Be(e,t){if(0===t)return 0;var n=Pe(e.map((function(e){return e%t}))),a=Me(n),u=a.reduce((function(e,t){return e+t}),0)/a.length;return u/t}function Me(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=e.length,u=Math.floor(a/t*n),r=Math.ceil(a/t*(t-n));return e.slice(u,r)}function Pe(e){return e.sort((function(e,t){return e-t}))}var Le=Object(a["g"])({components:{NumberInput:pe,SliderInput:we},props:{customBpm:{type:Number,required:!0},customOffset:{type:Number,required:!0},currentTimeDisplay:{type:Number,required:!0},getCurrentTime:{type:Function,required:!0}},emits:["update:bpm","update:offset","start-play"],setup:function(e,t){var n=Object(a["u"])("custom"),u=Object(a["u"])(e.customBpm),r=Object(a["u"])(e.customOffset),o=Object(a["a"])({get:function(){return 100*r.value},set:function(e){r.value=e/100}});Object(a["F"])((function(){return e.customBpm}),(function(){e.customBpm!==u.value&&(u.value=e.customBpm)})),Object(a["F"])((function(){return e.customOffset}),(function(e){e!==r.value&&(r.value=e)})),Object(a["F"])([u,r],(function(){n.value="custom"}));var i=Object(a["t"])(new Ie),c=Object(a["a"])((function(){return"meter"===n.value?i.period:Ce(u.value)})),l=Object(a["a"])((function(){return"meter"===n.value?i.bpm:u.value})),s=Object(a["a"])((function(){return"meter"===n.value?i.offset:r.value}));Object(a["G"])((function(){return t.emit("update:bpm",l.value)})),Object(a["G"])((function(){return t.emit("update:offset",s.value)}));var f=Object(a["a"])((function(){var t=s.value*c.value,n=(e.currentTimeDisplay-t)%c.value;return n/c.value<.25})),d=Object(a["a"])((function(){return f.value?"👏":"👐"})),p=Object(a["a"])((function(){return i.bpm.toFixed(1)})),b=Object(a["a"])((function(){return"".concat((100*i.offset).toFixed(0)," %")})),m=Object(a["a"])((function(){return l.value.toFixed(1)})),v=Object(a["a"])((function(){var e=100*s.value;return"".concat(e.toFixed(0)," %")}));return{customOffsetPercent:o,customBpmRef:u,meterBpmDisplay:p,meterOffsetDisplay:b,bpmDisplay:m,offsetDisplay:v,beatMeter:i,beatIndicator:d,beatInput:n}},methods:{tappedBeat:function(){this.$emit("start-play"),this.beatMeter.addBeats(this.getCurrentTime()),this.beatMeter.needsMoreBeats||(this.beatInput="meter")},resetClicked:function(){this.beatMeter.reset(),this.beatInput="custom"}}});n("5b5b");Le.render=re,Le.__scopeId="data-v-ef6d8c70";var De=Le,Ue=function(){function e(t,n){Object(xe["a"])(this,e),this.start_=Math.max(0,t),this.end_=Math.max(this.start,n)}return Object(Te["a"])(e,[{key:"setStart",value:function(e){this.start_=this.sanitizeInput(e,this.start),this.end<this.start&&this.setEnd(this.start)}},{key:"setDurationByShiftingEnd",value:function(e){e>=0&&this.setEnd(this.start+e)}},{key:"setEnd",value:function(e){this.end_=this.sanitizeInput(e,this.end),this.start>this.end&&this.setStart(this.end)}},{key:"shift",value:function(e){var t=this.start+e;if(t>=0){var n=this.end+e;this.setStart(t),this.setEnd(n)}else{var a=this.duration;this.setStart(0),this.setEnd(a)}}},{key:"sanitizeInput",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return isNaN(e)?t:Math.max(n,e)}},{key:"start",get:function(){return this.start_}},{key:"duration",get:function(){return this.end-this.start}},{key:"end",get:function(){return this.end_}}],[{key:"fromStartAndDuration",value:function(t,n){var a=t+n;return new e(t,a)}},{key:"fromStartAndEnd",value:function(t,n){return new e(t,n)}}]),e}();n("99af"),n("4d90");function Re(e){var t=e/60,n=t/60,a=Math.floor(n).toFixed(0).padStart(2,"0"),u=Math.floor(t%60).toFixed(0).padStart(2,"0"),r=Math.floor(e%60).toFixed(0).padStart(2,"0"),o=Math.floor(100*e%100).toFixed(0).padStart(2,"0"),i="".concat(a,":").concat(u,":").concat(r,".").concat(o);return i}var $e=Object(a["g"])({components:{VideoPlayer:R,NumberInput:pe,Slider:ge,BeatSettings:De},setup:function(){var e=Object(a["u"])(null),t=Object(a["u"])(null),n=Object(a["u"])(null),u=Object(a["u"])(null),r=Object(a["u"])(!1),o=Object(a["u"])(!1),i=Object(a["a"])((function(){return o.value?"Pause":"Play"})),c=Object(a["u"])(0),l=Object(a["a"])((function(){return Re(c.value)})),s=Object(a["u"])(1),f=Object(a["a"])({get:function(){return 100*s.value},set:function(e){s.value=e/100}}),d=Object(a["u"])(120),p=Object(a["a"])((function(){return Ce(d.value)})),b=Object(a["u"])(0),m=Object(a["a"])((function(){if(p.value>0){var e=b.value*p.value;return Math.floor((c.value-e)/p.value)}return 0})),v=Object(a["u"])(d.value),O=Object(a["u"])(b.value),j=Object(a["t"])(Ue.fromStartAndDuration(0,8)),h=Object(a["u"])(8),y=Object(a["u"])(!1),g=Object(a["a"])((function(){return y.value?"Stop loop":"Start loop"})),k=function(){var e=Ee(j.start,p.value,b.value);n.value.seekToSecond(e)},S=function(){k(),n.value.play()};Object(a["F"])([y,c,j],(function(e){var t=Object(P["a"])(e,3),n=t[0],a=t[1],u=t[2],r=.1,o=Ee(u.start,p.value,b.value)-r,i=Ee(u.end,p.value,b.value),c=o<a&&a<i;n&&!c&&S()}));var V=function(e,t){localStorage.setItem(e.name,JSON.stringify(t))},w=function(e){var t=localStorage.getItem(e.name);return null!==t?JSON.parse(t):null};return Object(a["F"])([d,b,j],(function(e){var n=Object(P["a"])(e,3),a=n[0],u=n[1],r=n[2];null!==t.value&&V(t.value,{bpm:a,offset:u,range:{start:r.start,end:r.end}})})),Object(a["F"])(t,(function(e){if(null!==e){var t=w(e);null!==t&&(v.value=t.bpm,O.value=t.offset,j.setStart(t.range.start),j.setEnd(t.range.end))}})),{videoFileInput:e,videoFile:t,isPlaying:o,player:n,duration:u,mirrored:r,playButtonText:i,currentTimeDisplay:c,currentTimeIndicator:l,playbackRate:s,playbackRatePercent:f,bpm:d,period:p,offset:b,customBpm:v,customOffset:O,bar:m,isLooping:y,range:j,shiftMultiplier:h,loopButtonText:g,goToLoopStart:k,playLoopStart:S}},methods:{videoFileSelected:function(){var e=this.videoFileInput.files;if(null!==e&&0!==e.length){var t=e[0];null!=t&&(this.videoFile=t)}},getCurrentTime:function(){return null!==this.player?this.player.getCurrentTime():0},seekToSecond:function(e){this.stopLoop(),this.player.seekToSecond(e)},togglePlay:function(){this.player.togglePlay()},shiftLoop:function(e){var t=e*this.shiftMultiplier;this.range.shift(t)},toggleLoop:function(){this.isLooping?this.stopLoop():this.startLoop()},startLoop:function(){this.isLooping=!0,this.playLoopStart()},stopLoop:function(){this.isLooping=!1},videoPaused:function(){this.stopLoop()},loopStartToNowClicked:function(){this.range.setStart(this.bar)},loopEndToNowClicked:function(){this.range.setEnd(this.bar)}}});function Ee(e,t,n){var a=n*t;return e*t+a}n("e91f");$e.render=M,$e.__scopeId="data-v-73f8586a";var qe=$e,Ae=[{path:"/",name:"Loopbar",component:qe}],ze=Object(c["a"])({history:Object(c["b"])(),routes:Ae}),He=ze,Je=n("5502"),Ge=Object(Je["a"])({state:{},mutations:{},actions:{},modules:{}});Object(a["b"])(o).use(Ge).use(He).mount("#app")},e91f:function(e,t,n){"use strict";n("b0a7")},f17c:function(e,t,n){}});
//# sourceMappingURL=app.efc5a8af.js.map