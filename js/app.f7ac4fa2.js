(function(e){function t(t){for(var u,o,i=t[0],c=t[1],l=t[2],f=0,d=[];f<i.length;f++)o=i[f],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&d.push(a[o][0]),a[o]=0;for(u in c)Object.prototype.hasOwnProperty.call(c,u)&&(e[u]=c[u]);s&&s(t);while(d.length)d.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],u=!0,i=1;i<n.length;i++){var c=n[i];0!==a[c]&&(u=!1)}u&&(r.splice(t--,1),e=o(o.s=n[0]))}return e}var u={},a={app:0},r=[];function o(t){if(u[t])return u[t].exports;var n=u[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=u,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var u in e)o.d(n,u,function(t){return e[t]}.bind(null,u));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/loopbar/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var s=c;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"1f7e":function(e,t,n){},"22a7":function(e,t,n){},4086:function(e,t,n){},4758:function(e,t,n){"use strict";n("acb8")},5653:function(e,t,n){"use strict";n("9eaf")},"5acd":function(e,t,n){"use strict";n("1f7e")},"9cdc":function(e,t,n){"use strict";n("d673")},"9eaf":function(e,t,n){},acb8:function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var u=n("7a23");function a(e,t,n,a,r,o){var i=Object(u["w"])("router-view");return Object(u["p"])(),Object(u["c"])(i)}n("9cdc");const r={};r.render=a;var o=r,i=n("9483");Object(i["a"])("".concat("/loopbar/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var c=n("6c02"),l=Object(u["G"])("data-v-3a796a37");Object(u["s"])("data-v-3a796a37");var s={class:"root-container"},f=Object(u["e"])(" Choose a video file "),d={key:0,class:"control-container"},p={class:"video-area"},b={class:"currentTime"},m={class:"loop-area"},v={class:"loop-settings"},O={class:"input-with-button"},j=Object(u["e"])("from"),h=Object(u["e"])("for duration"),y={class:"input-with-button"},g=Object(u["e"])("to");Object(u["q"])();var w=l((function(e,t,n,a,r,o){var i=Object(u["w"])("VideoPlayer"),c=Object(u["w"])("NumberInput"),w=Object(u["w"])("BeatSettings");return Object(u["p"])(),Object(u["c"])("div",s,[Object(u["f"])("label",null,[f,Object(u["f"])("input",{ref:"videoFileInput",type:"file",accept:"video/*",onChange:t[1]||(t[1]=function(){return e.videoFileSelected.apply(e,arguments)})},null,544)]),null!==e.videoFile?(Object(u["p"])(),Object(u["c"])("div",d,[Object(u["f"])("div",p,[Object(u["f"])(i,{ref:"player",file:e.videoFile,onUpdatedTimeDisplay:t[2]||(t[2]=function(t){return e.currentTimeDisplay=t}),onPaused:e.videoPaused},null,8,["file","onPaused"]),Object(u["f"])("span",b," Beat #"+Object(u["y"])(e.bar)+" ("+Object(u["y"])(e.currentTimeIndicator)+") ",1)]),Object(u["f"])("div",m,[Object(u["f"])("button",{onClick:t[3]||(t[3]=function(t){return e.toggleLoop()})},Object(u["y"])(e.loopButtonText),1),Object(u["f"])("div",v,[Object(u["f"])("div",O,[Object(u["f"])(c,{modelValue:e.range.start,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.range.start=t}),class:"narrow-input"},{default:l((function(){return[j]})),_:1},8,["modelValue"]),Object(u["f"])("button",{onClick:t[5]||(t[5]=function(t){return e.loopStartToNowClicked()})},"set to now")]),Object(u["f"])(c,{modelValue:e.range.duration,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.range.duration=t}),class:"narrow-input"},{default:l((function(){return[h]})),_:1},8,["modelValue"]),Object(u["f"])("div",y,[Object(u["f"])(c,{modelValue:e.range.end,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.range.end=t}),class:"narrow-input"},{default:l((function(){return[g]})),_:1},8,["modelValue"]),Object(u["f"])("button",{onClick:t[8]||(t[8]=function(t){return e.loopEndToNowClicked()})},"set to now")])])]),Object(u["f"])(w,{currentTimeDisplay:e.currentTimeDisplay,getCurrentTime:e.getCurrentTime,customBpm:e.customBpm,customOffset:e.customOffset,"onUpdate:bpm":t[9]||(t[9]=function(t){return e.bpm=t}),"onUpdate:offset":t[10]||(t[10]=function(t){return e.offset=t}),onStartPlay:t[11]||(t[11]=function(t){return e.player.play()})},null,8,["currentTimeDisplay","getCurrentTime","customBpm","customOffset"])])):Object(u["d"])("",!0)])})),T=(n("b0c0"),n("3835")),V=Object(u["G"])("data-v-13dc78a5"),x=V((function(e,t,n,a,r,o){return Object(u["p"])(),Object(u["c"])("video",{ref:"player",id:"player",src:e.source,controls:"",onPlaying:t[1]||(t[1]=function(t){return e.$emit("started-playing")}),onPause:t[2]||(t[2]=function(t){return e.$emit("paused")})},null,40,["src"])})),I=(n("d3b7"),n("3ca3"),n("ddb0"),n("2b3d"),Object(u["g"])({props:{file:{type:File}},emits:["updated-time-display","started-playing","paused"],setup:function(e,t){var n=Object(u["u"])(null),a=Object(u["a"])((function(){if(null!=e.file){var t=URL.createObjectURL(e.file);return t}return null})),r=null,o=function e(){var u=n.value.currentTime;r!==u&&(r=u,t.emit("updated-time-display",u)),requestAnimationFrame(e)};return Object(u["n"])(o),{player:n,source:a}},methods:{getCurrentTime:function(){return this.player.currentTime},seekToSecond:function(e){this.player.currentTime=e},play:function(){this.player.play()},pause:function(){this.player.pause()}}}));n("5653");I.render=x,I.__scopeId="data-v-13dc78a5";var k=I,_=Object(u["G"])("data-v-015a21ae");Object(u["s"])("data-v-015a21ae");var M={class:"beat-settings"},S={class:"visualization"},F={class:"beat-indicator"},B={class:"settings-area"},N={class:"meter setting"},C={class:"header"},P={key:0},D={class:"inputs"},E={class:"bpm-display"},L={key:0,class:"missing-beats"},U={key:1,class:"bpm"},$={class:"custom setting"},q={class:"header"},A=Object(u["e"])(" Use custom settings "),z={class:"inputs"},G=Object(u["e"])("Beats per minute (bpm)"),J=Object(u["e"])("Offset (in % of bpm)");Object(u["q"])();var R=_((function(e,t,n,a,r,o){var i=Object(u["w"])("NumberInput"),c=Object(u["w"])("SliderInput");return Object(u["p"])(),Object(u["c"])("div",M,[Object(u["f"])("div",S,[Object(u["f"])("span",F,Object(u["y"])(e.beatIndicator),1),Object(u["e"])(" "+Object(u["y"])(e.bpmDisplay)+" bpm ",1)]),Object(u["f"])("div",B,[Object(u["f"])("div",N,[Object(u["f"])("div",C,[Object(u["f"])("label",null,[Object(u["F"])(Object(u["f"])("input",{type:"radio",name:"beatInput",value:"meter","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.beatInput=t}),disabled:e.beatMeter.needsMoreBeats},null,8,["disabled"]),[[u["C"],e.beatInput]]),Object(u["f"])("div",null,[Object(u["f"])("span",{class:{disabled:e.beatMeter.needsMoreBeats}},"Use tap settings",2),e.beatMeter.needsMoreBeats?(Object(u["p"])(),Object(u["c"])("span",P," (unavailable until set)")):Object(u["d"])("",!0)])])]),Object(u["f"])("div",D,[Object(u["f"])("button",{onMousedown:t[2]||(t[2]=function(){return e.tappedBeat.apply(e,arguments)})},"Tap me to the beat",32),Object(u["f"])("div",E,[e.beatMeter.needsMoreBeats?(Object(u["p"])(),Object(u["c"])("span",L," Set the beats per minute (bpm) by tapping the button. ")):(Object(u["p"])(),Object(u["c"])("span",U,Object(u["y"])(e.meterBpmDisplay)+" bpm (offset "+Object(u["y"])(e.meterOffsetDisplay)+") ",1))]),Object(u["f"])("button",{onClick:t[3]||(t[3]=function(){return e.resetClicked.apply(e,arguments)})},"Reset bpm")])]),Object(u["f"])("div",$,[Object(u["f"])("div",q,[Object(u["f"])("label",null,[Object(u["F"])(Object(u["f"])("input",{type:"radio",name:"beatInput",value:"custom","onUpdate:modelValue":t[4]||(t[4]=function(t){return e.beatInput=t})},null,512),[[u["C"],e.beatInput]]),A])]),Object(u["f"])("div",z,[Object(u["f"])(i,{modelValue:e.customBpm,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.customBpm=t})},{default:_((function(){return[G]})),_:1},8,["modelValue"]),Object(u["f"])(c,{modelValue:e.customOffsetPercent,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.customOffsetPercent=t}),min:-50,max:50},{default:_((function(){return[J]})),_:1},8,["modelValue"])])])])])})),H=(n("a9e3"),n("b680"),Object(u["G"])("data-v-4ad62136"));Object(u["s"])("data-v-4ad62136");var K={class:"number-input"},Q={class:"label"};Object(u["q"])();var W=H((function(e,t,n,a,r,o){return Object(u["p"])(),Object(u["c"])("div",K,[Object(u["f"])("button",{class:"first-button",onClick:t[1]||(t[1]=function(){return e.decrement.apply(e,arguments)})},"⬅️"),Object(u["f"])("label",null,[Object(u["f"])("div",Q,[Object(u["v"])(e.$slots,"default")]),Object(u["f"])("input",{class:"input",type:"text",inputmode:"decimal",value:e.inputText,onChange:t[2]||(t[2]=function(t){return e.newInput(t.target.value)})},null,40,["value"])]),Object(u["f"])("button",{class:"second-button",onClick:t[3]||(t[3]=function(){return e.increment.apply(e,arguments)})},"➡️")])})),X=(n("c35a"),n("25f0"),Object(u["g"])({props:{modelValue:{type:Number,required:!0}},emits:["update:modelValue"],setup:function(e){var t=Object(u["A"])(e),n=t.modelValue,a=Object(u["u"])(Z(n.value));return Object(u["E"])(n,(function(e){var t=Y(a.value);null!=t&&t!==e&&(a.value=Z(e))})),{inputText:a}},methods:{newInput:function(e){this.inputText=e;var t=Y(e);null!=t&&this.$emit("update:modelValue",t)},increment:function(){this.$emit("update:modelValue",this.modelValue+1)},decrement:function(){this.$emit("update:modelValue",this.modelValue-1)}}}));function Y(e){var t=Number.parseFloat(e);return isNaN(t)?null:t}function Z(e){return e%1===0?e.toString():e.toFixed(2)}n("f495");X.render=W,X.__scopeId="data-v-4ad62136";var ee=X,te=Object(u["G"])("data-v-cc3e4eb8");Object(u["s"])("data-v-cc3e4eb8");var ne={class:"inputs"};Object(u["q"])();var ue=te((function(e,t,n,a,r,o){return Object(u["p"])(),Object(u["c"])("div",null,[Object(u["f"])("label",null,[Object(u["v"])(e.$slots,"default"),Object(u["f"])("div",ne,[Object(u["f"])("input",{type:"text",inputmode:"decimal",value:e.inputText,onChange:t[1]||(t[1]=function(t){return e.newTextInput(t.target.value)})},null,40,["value"]),Object(u["f"])("input",{type:"range",value:e.modelValue,onInput:t[2]||(t[2]=function(t){return e.newSliderInput(t.target.value)}),min:e.min,max:e.max},null,40,["value","min","max"])])])])})),ae=Object(u["g"])({props:{modelValue:{type:Number,required:!0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1}},emits:["update:modelValue"],setup:function(e,t){var n=Object(u["A"])(e),a=n.modelValue,r=Object(u["u"])(oe(a.value,e.step)),o=Object(u["a"])((function(){return a.value.toFixed(0)}));return Object(u["E"])(a,(function(t){var n=re(r.value);null!=n&&n!==t&&(r.value=oe(t,e.step))})),{inputText:r,modelValueDisplay:o}},methods:{newTextInput:function(e){this.inputText=e;var t=re(e);null!=t&&this.$emit("update:modelValue",t)},newSliderInput:function(e){var t=re(e);null!=t&&this.$emit("update:modelValue",t)},increment:function(){var e=this.modelValue+1;this.$_updateModelValue(e)},decrement:function(){var e=this.modelValue-1;this.$_updateModelValue(e)},$_updateModelValue:function(e){Math.max(this.min,Math.min(this.max,e));e!==this.modelValue&&this.$emit("update:modelValue",e)}}});function re(e){var t=Number.parseFloat(e);return isNaN(t)?null:t}function oe(e,t){var n=t%1;return 0===n?e.toFixed(0):e.toFixed(2)}n("4758");ae.render=ue,ae.__scopeId="data-v-cc3e4eb8";var ie=ae,ce=(n("d81d"),n("13d5"),n("fb6a"),n("d4ec")),le=n("bee2"),se=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Object(ce["a"])(this,e),this.beats=t,this.period_=0,this.offset_=0,this.calculate(t)}return Object(le["a"])(e,[{key:"addBeats",value:function(){var e;(e=this.beats).push.apply(e,arguments),Oe(this.beats),this.calculate(this.beats)}},{key:"reset",value:function(){this.beats=[],this.calculate(this.beats)}},{key:"calculate",value:function(e){this.period_=pe(e),this.offset_=me(e,this.period)}},{key:"period",get:function(){return this.period_}},{key:"bpm",get:function(){return 0===this.period?0:fe(this.period)}},{key:"offset",get:function(){return this.offset_}},{key:"needsMoreBeats",get:function(){return this.beats.length<2}}]),e}();function fe(e){return 60/e}function de(e){return 60/e}function pe(e){if(e.length<=1)return 0;var t=Oe(be(e)),n=ve(t),u=n.reduce((function(e,t){return e+t}),0)/n.length;return u}function be(e){for(var t=new Array(e.length-1),n=0;n<e.length-1;n++){var u=e[n],a=e[n+1],r=a-u;t[n]=r}return t}function me(e,t){if(0===t)return 0;var n=Oe(e.map((function(e){return e%t}))),u=ve(n),a=u.reduce((function(e,t){return e+t}),0)/u.length;return a/t}function ve(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,u=e.length,a=Math.floor(u/t*n),r=Math.ceil(u/t*(t-n));return e.slice(a,r)}function Oe(e){return e.sort((function(e,t){return e-t}))}var je=Object(u["g"])({components:{NumberInput:ee,SliderInput:ie},props:{customBpm:{type:Number,required:!0},customOffset:{type:Number,required:!0},currentTimeDisplay:{type:Number,required:!0},getCurrentTime:{type:Function,required:!0}},emits:["update:bpm","update:offset","start-play"],setup:function(e,t){var n=Object(u["u"])("custom"),a=Object(u["u"])(e.customBpm),r=Object(u["u"])(e.customOffset),o=Object(u["a"])({get:function(){return 100*r.value},set:function(e){r.value=e/100}});Object(u["E"])(Object(u["z"])(e,"customBpm"),(function(e){e!==a.value&&(a.value=e)})),Object(u["E"])(Object(u["z"])(e,"customOffset"),(function(e){e!==r.value&&(r.value=e)})),Object(u["E"])([a,r],(function(){n.value="custom"}));var i=Object(u["t"])(new se),c=Object(u["a"])((function(){return"meter"===n.value?i.period:de(a.value)})),l=Object(u["a"])((function(){return"meter"===n.value?i.bpm:a.value})),s=Object(u["a"])((function(){return"meter"===n.value?i.offset:r.value}));Object(u["E"])(l,(function(e){return t.emit("update:bpm",e)})),Object(u["E"])(s,(function(e){return t.emit("update:offset",e)}));var f=Object(u["a"])((function(){var t=s.value*c.value,n=(e.currentTimeDisplay-t)%c.value;return n/c.value<.25})),d=Object(u["a"])((function(){return f.value?"👏":"👐"})),p=Object(u["a"])((function(){return i.bpm.toFixed(1)})),b=Object(u["a"])((function(){return"".concat((100*i.offset).toFixed(0)," %")})),m=Object(u["a"])((function(){return l.value.toFixed(1)})),v=Object(u["a"])((function(){var e=100*s.value;return"".concat(e.toFixed(0)," %")}));return{customBpm:a,customOffset:r,customOffsetPercent:o,meterBpmDisplay:p,meterOffsetDisplay:b,bpmDisplay:m,offsetDisplay:v,beatMeter:i,beatIndicator:d,beatInput:n}},methods:{tappedBeat:function(){this.$emit("start-play"),this.beatMeter.addBeats(this.getCurrentTime()),this.beatMeter.needsMoreBeats||(this.beatInput="meter")},resetClicked:function(){this.beatMeter.reset(),this.beatInput="custom"}}});n("fe85");je.render=R,je.__scopeId="data-v-015a21ae";var he=je,ye=function(){function e(t,n){Object(ce["a"])(this,e),this.start_=Math.max(0,t),this.duration_=Math.max(0,n)}return Object(le["a"])(e,[{key:"sanitizeInput",value:function(e,t){return isNaN(e)?t:Math.max(0,e)}},{key:"start",get:function(){return this.start_},set:function(e){this.start_=this.sanitizeInput(e,this.start)}},{key:"duration",get:function(){return this.duration_},set:function(e){this.duration_=this.sanitizeInput(e,this.duration)}},{key:"end",get:function(){return this.start+this.duration},set:function(e){var t=e-this.start;t>=0?this.duration=t:(this.start=this.start+t,this.duration=0)}}],[{key:"fromStartAndEnd",value:function(t,n){if(t<n){var u=n-t;return new e(t,u)}return null}}]),e}();n("99af"),n("4d90");function ge(e){var t=e/60,n=t/60,u=Math.floor(n).toFixed(0).padStart(2,"0"),a=Math.floor(t%60).toFixed(0).padStart(2,"0"),r=Math.floor(e%60).toFixed(0).padStart(2,"0"),o=Math.floor(100*e%100).toFixed(0).padStart(2,"0"),i="".concat(u,":").concat(a,":").concat(r,".").concat(o);return i}var we=Object(u["g"])({components:{VideoPlayer:k,NumberInput:ee,BeatSettings:he},setup:function(){var e=Object(u["u"])(null),t=Object(u["u"])(null),n=Object(u["u"])(null),a=Object(u["u"])(0),r=Object(u["a"])((function(){return ge(a.value)})),o=Object(u["u"])(120),i=Object(u["a"])((function(){return de(o.value)})),c=Object(u["u"])(0),l=Object(u["a"])((function(){if(i.value>0){var e=c.value*i.value;return Math.floor((a.value-e)/i.value)}return 0})),s=Object(u["u"])(o.value),f=Object(u["u"])(c.value),d=function(e,t){localStorage.setItem(e.name,JSON.stringify(t))},p=function(e){var t=localStorage.getItem(e.name);return null!==t?JSON.parse(t):null};Object(u["E"])([o,c],(function(e){var n=Object(T["a"])(e,2),u=n[0],a=n[1];null!==t.value&&d(t.value,{bpm:u,offset:a})})),Object(u["E"])(t,(function(e){if(null!==e){var t=p(e);null!==t&&(s.value=t.bpm,f.value=t.offset)}}));var b=Object(u["t"])(new ye(0,1)),m=Object(u["u"])(!1),v=Object(u["a"])((function(){return m.value?"Stop loop":"Start loop"})),O=function(){var e=Te(b.start,i.value,c.value);n.value.seekToSecond(e),n.value.play()};return Object(u["E"])([m,a,b],(function(e){var t=Object(T["a"])(e,3),n=t[0],u=t[1],a=t[2],r=.1,o=Te(a.start,i.value,c.value)-r,l=Te(a.end,i.value,c.value),s=o<u&&u<l;n&&!s&&O()})),{videoFileInput:e,videoFile:t,player:n,currentTimeDisplay:a,currentTimeIndicator:r,bpm:o,period:i,offset:c,customBpm:s,customOffset:f,bar:l,isLooping:m,range:b,loopButtonText:v}},methods:{videoFileSelected:function(){var e=this.videoFileInput.files;if(null!==e&&0!==e.length){var t=e[0];null!=t&&(this.videoFile=t)}},getCurrentTime:function(){return null!==this.player?this.player.getCurrentTime():0},toggleLoop:function(){this.isLooping?this.stopLoop():this.startLoop()},startLoop:function(){this.isLooping=!0},stopLoop:function(){this.isLooping=!1},videoPaused:function(){this.stopLoop()},loopStartToNowClicked:function(){this.range.start=this.bar},loopEndToNowClicked:function(){this.range.end=this.bar}}});function Te(e,t,n){var u=n*t;return e*t+u}n("5acd");we.render=w,we.__scopeId="data-v-3a796a37";var Ve=we,xe=[{path:"/",name:"Loopbar",component:Ve}],Ie=Object(c["a"])({history:Object(c["b"])(),routes:xe}),ke=Ie,_e=n("5502"),Me=Object(_e["a"])({state:{},mutations:{},actions:{},modules:{}});Object(u["b"])(o).use(Me).use(ke).mount("#app")},d673:function(e,t,n){},f495:function(e,t,n){"use strict";n("4086")},fe85:function(e,t,n){"use strict";n("22a7")}});
//# sourceMappingURL=app.f7ac4fa2.js.map